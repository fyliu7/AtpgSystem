cscope 15 $HOME/Documents/atpg/pkg -q 0000000510 0000058694
	@atpg/src/atpg_cmd.cpp

1 
	~"©pg_cmd.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	gTCLAP
;

6 
usšg
 
Çme¥aû
 
	gAgNs
;

7 
usšg
 
Çme¥aû
 
	gCmdNs
;

8 
usšg
 
Çme¥aû
 
	gIÁfNs
;

9 
usšg
 
Çme¥aû
 
	gCÜeNs
;

11 
	gBudCœcu™Cmd
::
	$BudCœcu™Cmd
(cÚ¡ 
¡ršg
 &
Çme
,

12 cÚ¡ 
¡ršg
 &
msg
,

13 
N‘li¡
 *
Æ
,

14 
AgMgr
 *
©pg_mgr
è: 
	$Cmd
(
Çme
, 
msg
) {

16 
Æ_
 = 
Æ
;

17 
©pg_mgr_
 = 
©pg_mgr
;

19 
	}
}

21 
	gBudCœcu™Cmd
::~
	$BudCœcu™Cmd
() {

22 
	}
}

24 
boŞ
 
BudCœcu™Cmd
::
	$run
() {

25 if(!
Æ_
->
	`g‘Tİ
()) {

27  
çl£
;

30 if(!
©pg_mgr_
->
cœ
) {

31 
©pg_mgr_
->
cœ
 = 
Ãw
 
Cœcu™
;

34  
Æ_
->
	`bud
(
©pg_mgr_
->
cœ
);

35 
	}
}

37 
	gR•ÜtG©eCmd
::
	$R•ÜtG©eCmd
(cÚ¡ 
¡ršg
 &
Çme
,

38 cÚ¡ 
¡ršg
 &
msg
,

39 
N‘li¡
 *
Æ
,

40 
AgMgr
 *
©pg_mgr
è: 
	$Cmd
(
Çme
, 
msg
) {

42 
Æ_
 = 
Æ
;

43 
©pg_mgr_
 = 
©pg_mgr
;

44 
Œy
 {

45 
İt_mgr_
->
	`»gArg
("gate",

49 
çl£
,

50 
Œue
);

52 
	`ÿtch
 (
ArgExû±iÚ
 &
e
) {

54 
	`ex™
(1);

56 
	}
}

58 
	gR•ÜtG©eCmd
::~
	$R•ÜtG©eCmd
() {

59 
	}
}

60 
boŞ
 
R•ÜtG©eCmd
::
	$run
() {

61 if(!
©pg_mgr_
->
cœ
) {

63  
çl£
;

67 
	`»pÜtG©e
();

68  
Œue
;

69 
	}
}

71 
	gR•ÜtG©eCmd
::
	$»pÜtG©e
() const {

72 
n
=0;‚<
©pg_mgr_
->
cœ
->
ÁÙg©e
;‚++) {

73 
G©e
 *
g
 = 
©pg_mgr_
->
cœ
->
g©es
[
n
];

74 
cout
 << " Gate";

75 
cout
 << " id (" << 
n
 << ")";

76 
cout
 << "†vl(" << 
g
->
lvl
 << ")";

77 
cout
 << "yp(" << 
g
->
ty³
 << ")\n";

78 
cout
 << " fi[" << 
g
->
nfi
 << "] ";

79 
ni
=0;‚i<
g
->
nfi
;‚i++)

80 
cout
 << 
g
->
fis
[
ni
]->
id
 << " ";

81 
cout
 << 
’dl
;

82 
cout
 << " fo[" << 
g
->
nfo
 << "] ";

83 
no
=0;‚o<
g
->
nfo
;‚o++)

84 
cout
 << 
g
->
fos
[
no
]->
id
 << " ";

85 
cout
 << 
’dl
 <<ƒndl;

87 
	}
}

89 
	gAddFauÉCmd
::
	$AddFauÉCmd
(cÚ¡ 
¡ršg
 &
Çme
,

90 cÚ¡ 
¡ršg
 &
msg
,

91 
N‘li¡
 *
Æ
,

92 
AgMgr
 *
©pg_mgr
è: 
	$Cmd
(
Çme
, 
msg
) {

94 
Æ_
 = 
Æ
;

95 
©pg_mgr_
 = 
©pg_mgr
;

96 
Œy
 {

97 
İt_mgr_
->
	`»gO±
("all",

99 
çl£
,

103 
	`ÿtch
 (
ArgExû±iÚ
 &
e
) {

105 
	`ex™
(1);

107 
	}
}

109 
	gAddFauÉCmd
::~
	$AddFauÉCmd
(è{
	}
}

110 
boŞ
 
AddFauÉCmd
::
	$run
() {

111 if(!
©pg_mgr_
->
cœ
) {

113  
çl£
;

116 if(!
©pg_mgr_
->
f_mgr
)

117 
©pg_mgr_
->
f_mgr
 = 
Ãw
 
FauÉMgr
;

119 
cout
 << "Adding fualt(s)...\n\n";

120 if(
İt_mgr_
->
	`g‘O±V®
("all")) {

121 
©pg_mgr_
->
f_mgr
->
	`AddAÎFauÉs
×g_mgr_->
cœ
);

123 
cout
 << "cu¼’y ha " << 
©pg_mgr_
->
f_mgr
->
	`g‘FauÉNum
();

124 
cout
 << " fault(s)...\n\n";

126  
Œue
;

130  
çl£
;

131 
	}
}

133 
	gRunAgCmd
::
	$RunAgCmd
(cÚ¡ 
¡ršg
 &
Çme
,

134 cÚ¡ 
¡ršg
 &
msg
,

135 
N‘li¡
 *
Æ
,

136 
AgMgr
 *
©pg_mgr
è: 
	$Cmd
(
Çme
, 
msg
) {

138 
Æ_
 = 
Æ
;

139 
©pg_mgr_
 = 
©pg_mgr
;

140 
	}
}

142 
	gRunAgCmd
::~
	$RunAgCmd
() {

143 
	}
}

145 
boŞ
 
RunAgCmd
::
	$run
() {

146 if(!
©pg_mgr_
->
cœ
) {

148  
çl£
;

151 if(!
©pg_mgr_
->
f_mgr
) {

152 
©pg_mgr_
->
f_mgr
 = 
Ãw
 
FauÉMgr
;

153 
©pg_mgr_
->
f_mgr
->
	`AddAÎFauÉs
×g_mgr_->
cœ
);

155 
©pg_mgr_
->
	`Run
();

157  
Œue
;

158 
	}
}

160 
	gR•ÜtP©Cmd
::
	$R•ÜtP©Cmd
(cÚ¡ 
¡ršg
 &
Çme
,

161 cÚ¡ 
¡ršg
 &
msg
,

162 
N‘li¡
 *
Æ
,

163 
AgMgr
 *
©pg_mgr
è: 
	$Cmd
(
Çme
, 
msg
) {

165 
Æ_
 = 
Æ
;

166 
©pg_mgr_
 = 
©pg_mgr
;

167 
	}
}

169 
	gR•ÜtP©Cmd
::~
	$R•ÜtP©Cmd
() {

170 
	}
}

172 
boŞ
 
R•ÜtP©Cmd
::
	$run
() {

173 if(!
©pg_mgr_
->
·t_mgr
) {

175  
çl£
;

178 
¡ršg
 
nm
;

179 
size_t
 
n
=0;‚<
©pg_mgr_
->
·t_mgr
->
Åi
;‚++) {

180 
Æ_
->
ûÎs
[
©pg_mgr_
->
·t_mgr
->
pi_Üd”
[
n
]]->
	`g‘Name
(
nm
);

181 
cout
 << 
nm
 << " ";

183 
cout
 << "|\n";

185 
size_t
 
n
=0;‚<
©pg_mgr_
->
·t_mgr
->
Åpi
;‚++) {

186 
Æ_
->
ûÎs
[
©pg_mgr_
->
·t_mgr
->
µi_Üd”
[
n
]]->
	`g‘Name
(
nm
);

187 
cout
 << 
nm
 << " ";

189 
cout
 << "|\n";

191 
size_t
 
n
=0;‚<
©pg_mgr_
->
·t_mgr
->
Åo
;‚++) {

192 
Æ_
->
ûÎs
[
©pg_mgr_
->
·t_mgr
->
po_Üd”
[
n
]]->
	`g‘Name
(
nm
);

193 
cout
 << 
nm
 << " ";

195 
cout
 << "\n";

197 
cout
 << "BASIC_SCAN\n";

198 
cout
 << "_num_of_·‰”n_" << 
©pg_mgr_
->
·t_mgr
->
·ts
.
	`size
(è<< 
’dl
;

199 
size_t
 
i
=0; i<
©pg_mgr_
->
·t_mgr
->
·ts
.
	`size
(); i++) {

200 
P©‹º
 *
p
 = 
©pg_mgr_
->
·t_mgr
->
·ts
[
i
];

202 
size_t
 
j
=0; j<
p
->
pi
.
	`size
(); j++)

203 
	`Pršt3V®ue
(
p
->
pi
[
j
]);

206 
size_t
 
j
=0; j<
p
->
µi
.
	`size
(); j++)

207 
	`Pršt3V®ue
(
p
->
µi
[
j
]);

216 
cout
 << 
’dl
;

219  
Œue
;

220 
	}
}

	@atpg/src/atpg_cmd.h

1 #iâdeà
_ATPG_ATPG_CMD_H_


2 
	#_ATPG_ATPG_CMD_H_


	)

4 
	~"cmd/¤c/cmd.h
"

5 
	~"š‹rçû/¤c/Ãi¡.h
"

6 
	~"cÜe/¤c/©pg_mgr.h
"

8 
Çme¥aû
 
	gAgNs
 {

10 şas 
	cBudCœcu™Cmd
 : 
public
 
CmdNs
::
Cmd
 {

11 
public
:

12 
BudCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

13 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

14 
IÁfNs
::
N‘li¡
 *
Æ
,

15 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

16 ~
BudCœcu™Cmd
();

17 
	g´iv©e
:

18 
boŞ
 
run
();

20 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

21 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

24 şas 
	cR•ÜtCœcu™Cmd
 : 
public
 
CmdNs
::
Cmd
 {

25 
public
:

26 
R•ÜtCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

27 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

28 
IÁfNs
::
N‘li¡
 *
Æ
,

29 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

30 ~
R•ÜtCœcu™Cmd
();

31 
	g´iv©e
:

32 
boŞ
 
run
();

34 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

35 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

38 şas 
	cR•ÜtG©eCmd
 : 
public
 
CmdNs
::
Cmd
 {

39 
public
:

40 
R•ÜtG©eCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

41 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

42 
IÁfNs
::
N‘li¡
 *
Æ
,

43 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

44 ~
R•ÜtG©eCmd
();

45 
	g´iv©e
:

46 
boŞ
 
run
();

48 
»pÜtG©e
() const;

50 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

51 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

54 şas 
	cAddFauÉCmd
 : 
public
 
CmdNs
::
Cmd
 {

55 
public
:

56 
AddFauÉCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

57 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

58 
IÁfNs
::
N‘li¡
 *
Æ
,

59 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

60 ~
AddFauÉCmd
();

61 
	g´iv©e
:

62 
boŞ
 
run
();

64 
addFauÉ
();

66 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

67 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

70 şas 
	cRunAgCmd
 : 
public
 
CmdNs
::
Cmd
 {

71 
public
:

72 
RunAgCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

73 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

74 
IÁfNs
::
N‘li¡
 *
Æ
,

75 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

76 ~
RunAgCmd
();

77 
	g´iv©e
:

78 
boŞ
 
run
();

80 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

81 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

84 şas 
	cR•ÜtP©Cmd
 : 
public
 
CmdNs
::
Cmd
 {

85 
public
:

86 
R•ÜtP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

87 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

88 
IÁfNs
::
N‘li¡
 *
Æ
,

89 
CÜeNs
::
AgMgr
 *
©pg_mgr
);

90 ~
R•ÜtP©Cmd
();

91 
	g´iv©e
:

92 
boŞ
 
run
();

94 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

95 
	gCÜeNs
::
AgMgr
 *
©pg_mgr_
;

	@atpg/src/main.cpp

1 
	~"£tup_cmd.h
"

2 
	~"©pg_cmd.h
"

4 
usšg
 
Çme¥aû
 
	g¡d
;

6 
usšg
 
Çme¥aû
 
	gAgNs
;

7 
usšg
 
Çme¥aû
 
	gCmdNs
;

8 
usšg
 
Çme¥aû
 
	gIÁfNs
;

9 
usšg
 
Çme¥aû
 
	gCÜeNs
;

11 
	$maš
(
¬gc
, **
¬gv
) {

13 
AgMgr
 
mgr
;

14 
N‘li¡
 
Æ
;

15 
R—dN‘li¡Cmd
 
	`cmdRdNl
("©pg", "»ad g©e-Ëv–‚‘li¡ fe", &
Æ
);

16 
BudCœcu™Cmd
 
	`cmdBC
("bud_cœ", "bud cœcu™", &
Æ
, &
mgr
);

19 
AddFauÉCmd
 
	`cmdAddF
("add_çuÉ", "add¬g‘ fauÉ(s)", &
Æ
, &
mgr
);

20 
RunAgCmd
 
	`cmdRunA
("run_©pg", "ruÀ©pg…roûss", &
Æ
, &
mgr
);

21 
R•ÜtP©Cmd
 
	`cmdR±P
("»pÜt_·‰”n", "»pÜˆ·‰”n(s)", &
Æ
, &
mgr
);

23 
veùÜ
<
¡ršg
> 
¬gsRdNl
;

25 
veùÜ
<
¡ršg
> 
¬gsBC
;

27 
veùÜ
<
¡ršg
> 
¬gsAddF
;

28 
veùÜ
<
¡ršg
> 
¬gsRunA
;

29 
veùÜ
<
¡ršg
> 
¬gsR±P
;

31 
i
=0; i<
¬gc
; i++)

32 
¬gsRdNl
.
	`push_back
(
	`¡ršg
(
¬gv
[
i
]));

33 
¬gsBC
.
	`push_back
(
	`¡ršg
("build_cir"));

36 
¬gsAddF
.
	`push_back
(
	`¡ršg
("add_fault"));

37 
¬gsAddF
.
	`push_back
(
	`¡ršg
("--all"));

38 
¬gsRunA
.
	`push_back
(
	`¡ršg
("run_atpg"));

39 
¬gsR±P
.
	`push_back
(
	`¡ršg
("report_pattern"));

41 
cmdRdNl
.
	`exec
(
¬gsRdNl
);

43 
cmdBC
.
	`exec
(
¬gsBC
);

45 
cmdAddF
.
	`exec
(
¬gsAddF
);

46 
cmdRunA
.
	`exec
(
¬gsRunA
);

47 
cmdR±P
.
	`exec
(
¬gsR±P
);

50 
	}
}

	@atpg/src/setup_cmd.cpp

1 
	~"£tup_cmd.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	gTCLAP
;

6 
usšg
 
Çme¥aû
 
	gAgNs
;

7 
usšg
 
Çme¥aû
 
	gCmdNs
;

8 
usšg
 
Çme¥aû
 
	gIÁfNs
;

10 
	gR—dN‘li¡Cmd
::
	$R—dN‘li¡Cmd
(cÚ¡ 
¡ršg
 &
Çme
,

11 cÚ¡ 
¡ršg
 &
msg
,

12 
N‘li¡
 *
Æ
è: 
	$Cmd
(
Çme
, 
msg
) {

14 
Æ_
 = 
Æ
;

15 
Œy
 {

16 
İt_mgr_
->
	`»gArg
("nl_file",

20 
Œue
);

22 
	`ÿtch
 (
ArgExû±iÚ
 &
e
) {

24 
	`ex™
(1);

26 
	}
}

28 
	gR—dN‘li¡Cmd
::~
	$R—dN‘li¡Cmd
(è{
	}
}

29 
boŞ
 
R—dN‘li¡Cmd
::
	$run
() {

30 
¡ršg
 
Æ_âame
 = 
İt_mgr_
->
	`g‘V®
("nl_file");

32 if(!
Æ_
->
	`·r£
(
Æ_âame
, 
	`¡ršg
())) {

34 
û¼
 << "Parsing‚etlist file failed...\n";

35 
	`ex™
(-1);

46  
Œue
;

47 
	}
}

49 
	gR•ÜtC–lCmd
::
	$R•ÜtC–lCmd
(cÚ¡ 
¡ršg
 &
Çme
,

50 cÚ¡ 
¡ršg
 &
msg
,

51 
N‘li¡
 *
Æ
è: 
	$Cmd
(
Çme
, 
msg
) {

53 
Æ_
 = 
Æ
;

54 
Œy
 {

55 
İt_mgr_
->
	`»gArg
("cell",

59 
çl£
,

60 
Œue
);

63 
	`ÿtch
 (
ArgExû±iÚ
 &
e
) {

65 
	`ex™
(1);

67 
	}
}

69 
	gR•ÜtC–lCmd
::~
	$R•ÜtC–lCmd
(è{
	}
}

70 
boŞ
 
R•ÜtC–lCmd
::
	$run
() {

71 if(!
Æ_
->
	`g‘Tİ
()) {

73  
çl£
;

78 
size_t
 
n
=0;‚<
Æ_
->
	`g‘Tİ
()->
	`g‘C–lNum
();‚++) {

79 
¡ršg
 
nm
;

80 
C–l
 *
c
 = 
Æ_
->
	`g‘Tİ
()->
	`g‘C–l
(
n
);

82 
cout
 << "Cell ";

83 
c
->
	`g‘Name
(
nm
);

84 
cout
 << 
nm
 << "ype(";

85 
cout
 << 
c
->
	`g‘Ty³
() << ")\n";

87 
C–lVec
 
çnšs
, 
çnouts
;

88 
c
->
	`g‘FªšC–l
(
çnšs
);

89 
size_t
 
i
=0; i<
c
->
	`g‘OutN‘Num
(); i++) {

90 
c
->
	`g‘FªoutC–l
(
i
, 
çnouts
);

93 
cout
 << "fi[" << 
çnšs
.
	`size
() << "] ";

94 
size_t
 
i
=0; i<
çnšs
.
	`size
(); i++) {

95 
çnšs
[
i
]->
	`g‘Name
(
nm
);

96 
cout
 << 
nm
 << " ";

98 
cout
 << 
’dl
;

100 
cout
 << "fo[" << 
çnouts
.
	`size
() << "] ";

101 
size_t
 
i
=0; i<
çnouts
.
	`size
(); i++) {

102 
çnouts
[
i
]->
	`g‘Name
(
nm
);

103 
cout
 << 
nm
 << " ";

105 
cout
 << 
’dl
;

106 
cout
 << 
’dl
;

109  
Œue
;

110 
	}
}

	@atpg/src/setup_cmd.h

1 #iâdeà
_ATPG_SETUP_CMD_H_


2 
	#_ATPG_SETUP_CMD_H_


	)

4 
	~"cmd/¤c/cmd.h
"

5 
	~"š‹rçû/¤c/Ãi¡.h
"

7 
Çme¥aû
 
	gAgNs
 {

9 şas 
	cR—dN‘li¡Cmd
 : 
public
 
CmdNs
::
Cmd
 {

10 
public
:

11 
R—dN‘li¡Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

12 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

13 
IÁfNs
::
N‘li¡
 *
Æ
);

14 ~
R—dN‘li¡Cmd
();

15 
	g´iv©e
:

16 
boŞ
 
run
();

18 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

21 şas 
	cR•ÜtC–lCmd
 : 
public
 
CmdNs
::
Cmd
 {

22 
public
:

23 
R•ÜtC–lCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

24 cÚ¡ 
¡d
::
¡ršg
 &
msg
,

25 
IÁfNs
::
N‘li¡
 *
Æ
);

26 ~
R•ÜtC–lCmd
();

28 
	g´iv©e
:

29 
boŞ
 
run
();

31 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

	@cmd/src/cmd.cpp

1 
	~"cmd.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	gTCLAP
;

6 
usšg
 
Çme¥aû
 
	gCmdNs
;

8 
boŞ
 
	gCmd
::
exec
(
veùÜ
<
¡ršg
> &
¬gs
) {

9 
Œy
 {

10 
İt_mgr_
->
·r£
(
¬gs
);

11  
run
();

13 
ÿtch
 (
ArgExû±iÚ
 &
e
) {

15  
	gçl£
;

	@cmd/src/cmd.h

1 #iâdeà
_CMD_CMD_H_


2 
	#_CMD_CMD_H_


	)

4 
	~"İt_mgr.h
"

6 
Çme¥aû
 
	gCmdNs
 {

8 
şass
 
	gCmd
;

10 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, std::
	t£t
<¡d::¡ršg> > 
	tC©M­
;

11 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tCmd
 *> 
	tCmdM­
;

12 
	gC©M­
::
	t™”©Ü
 
	tC©M­I‹r
;

13 
	gCmdM­
::
	t™”©Ü
 
	tCmdM­I‹r
;

15 şas 
	cCmd
 {

16 
	gpublic
:

17 
Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

18 cÚ¡ 
¡d
::
¡ršg
 &
msg
);

19 
	gvœtu®
 ~
Cmd
();

21 
boŞ
 
exec
(
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gs
);

22 
	g¡d
::
¡ršg
 
g‘Name
() const;

24 
O±Mgr
 *
	gİt_mgr_
;

25 
	g´Ùeùed
:

26 
vœtu®
 
boŞ
 
run
() = 0;

29 şas 
	cCmdMgr
 {

30 
	gpublic
:

31 
CmdMgr
();

32 ~
CmdMgr
();

34 
	eResuÉ
 { 
	gEXIT
 = -1, 
	gSUCCESS
, 
	gFAIL
, 
	gNOT_EXIST
, 
	gNOP
 };

36 
boŞ
 
»gCmd
(cÚ¡ 
¡d
::
¡ršg
 &
ÿt
, 
Cmd
 * cÚ¡ 
cmd
);

37 
Cmd
* 
g‘Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) const;

39 
ResuÉ
 
exec
(cÚ¡ 
¡d
::
¡ršg
 &
cmdSŒ
);

41 
	g´iv©e
:

42 
C©M­
 
ÿt_m­_
;

43 
CmdM­
 
	gcmd_m­_
;

46 
šlše
 
	gCmd
::
Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, cÚ¡ std::¡ršg &
msg
) {

47 
İt_mgr_
 = 
Ãw
 
O±Mgr
(
Çme
, 
msg
);

50 
šlše
 
	gCmd
::~
	$Cmd
() {

51 
d–‘e
 
İt_mgr_
;

52 
	}
}

54 
šlše
 
	g¡d
::
¡ršg
 
Cmd
::
	$g‘Name
() const {

55  
İt_mgr_
->
	`g‘Name
();

56 
	}
}

	@cmd/src/opt_mgr.cpp

1 
	~<İt_mgr.h
>

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	gTCLAP
;

6 
usšg
 
Çme¥aû
 
	gCmdNs
;

8 
boŞ
 
	gO±Mgr
::
	$»gArg
(cÚ¡ 
¡ršg
 &
Çme
,

9 cÚ¡ 
¡ršg
 &
desc
,

10 cÚ¡ 
¡ršg
 &
ty³_desc
,

11 cÚ¡ 
¡ršg
 &
æag
,

12 
boŞ
 
is_»q
,

13 
boŞ
 
is_muÉi
) {

15 if(
Çme_£t_
.
	`fšd
(
Çme
)=òame_£t_.
	`’d
()) {

17 if(
æag
.
	`em±y
()) {

18 if(!
is_muÉi
) {

19 
V®ueArg
<
¡ršg
> *
¬g
;

20 
¬g
 = 
Ãw
 
UÆab–edV®ueArg
<
¡ršg
> (
Çme
,

21 
desc
,

22 
is_»q
,

24 
ty³_desc
);

26 
İt_
->
	`add
(
¬g
);

27 
¬g_m­_
[
Çme
] = 
¬g
;

30 
MuÉiArg
<
¡ršg
> *
¬g
;

31 
¬g
 = 
Ãw
 
UÆab–edMuÉiArg
<
¡ršg
> (
Çme
,

32 
desc
,

33 
is_»q
,

34 
ty³_desc
);

35 
İt_
->
	`add
(
¬g
);

36 
muÉi_m­_
[
Çme
] = 
¬g
;

40 if(
æag_£t_
.
	`fšd
(
æag
)==æag_£t_.
	`’d
()) {

41 
æag_£t_
.
	`š£¹
(
æag
);

43  
çl£
;

44 if(!
is_muÉi
) {

45 
V®ueArg
<
¡ršg
> *
¬g
;

46 
¬g
 = 
Ãw
 
V®ueArg
<
¡ršg
> (
æag
,

47 
Çme
,

48 
desc
,

49 
is_»q
,

51 
ty³_desc
);

52 
İt_
->
	`add
(
¬g
);

53 
¬g_m­_
[
Çme
] = 
¬g
;

56 
MuÉiArg
<
¡ršg
> *
¬g
;

57 
¬g
 = 
Ãw
 
MuÉiArg
<
¡ršg
> (
æag
,

58 
Çme
,

59 
desc
,

60 
is_»q
,

61 
ty³_desc
);

62 
İt_
->
	`add
(
¬g
);

63 
muÉi_m­_
[
Çme
] = 
¬g
;

66 
Çme_£t_
.
	`š£¹
(
Çme
);

67  
Œue
;

69  
çl£
;

70 
	}
}

73 
boŞ
 
	gO±Mgr
::
	$»gO±
(cÚ¡ 
¡ršg
 &
Çme
,

74 cÚ¡ 
¡ršg
 &
desc
,

75 
boŞ
 
v®
,

76 cÚ¡ 
¡ršg
 &
æag
) {

78 if(
Çme_£t_
.
	`fšd
(
Çme
)=òame_£t_.
	`’d
()) {

79 
¡ršg
 
f
 = (
æag
=="")?
Çme
.
	`sub¡r
(1):flag;

80 if(
æag_£t_
.
	`fšd
(
f
)==æag_£t_.
	`’d
()) {

81 
Sw™chArg
 *
¬g
 = 
Ãw
 
	`Sw™chArg
(
f
, 
Çme
, 
desc
, 
v®
);

82 
İt_
->
	`add
(
¬g
);

84 
æag_£t_
.
	`š£¹
(
f
);

85 
Çme_£t_
.
	`š£¹
(
Çme
);

86 
İt_m­_
[
Çme
] = 
¬g
;

88  
Œue
;

90  
çl£
;

92  
çl£
;

93 
	}
}

96 
	gO±Mgr
::
·r£
(
veùÜ
<
¡ršg
> &
¬gs
) {

97 
İt_
->
·r£
(
¬gs
);

100 
¡ršg
 
	gO±Mgr
::
	$g‘V®
(cÚ¡ 
¡ršg
 &
Çme
) const {

101 
ArgM­
::
cÚ¡_™”©Ü
 
™
 = 
¬g_m­_
.
	`fšd
(
Çme
);

102 if(
™
!=
¬g_m­_
.
	`’d
()) {

103  
™
->
£cÚd
->
	`g‘V®ue
();

109 
	}
}

111 cÚ¡ 
	gveùÜ
<
	g¡ršg
>* 
	gO±Mgr
::
	$g‘MuÉiV®
(cÚ¡ 
¡ršg
 &
Çme
) const {

112 
MuÉiM­
::
cÚ¡_™”©Ü
 
™
 = 
muÉi_m­_
.
	`fšd
(
Çme
);

113 if(
™
!=
muÉi_m­_
.
	`’d
()) {

114  &(
™
->
£cÚd
->
	`g‘V®ue
());

118  
NULL
;

121 
	}
}

123 
boŞ
 
	gO±Mgr
::
	$g‘O±V®
(cÚ¡ 
¡ršg
 &
Çme
) const {

124 
O±M­
::
cÚ¡_™”©Ü
 
™
 = 
İt_m­_
.
	`fšd
(
Çme
);

125 if(
™
!=
İt_m­_
.
	`’d
()) {

126  
™
->
£cÚd
->
	`g‘V®ue
();

130  
çl£
;

133 
	}
}

	@cmd/src/opt_mgr.h

1 #iâdeà
_CMD_OPT_MGR_H_


2 
	#_CMD_OPT_MGR_H_


	)

4 
	~<m­
>

5 
	~<£t
>

7 
	~"tş­/CmdLše.h
"

9 
Çme¥aû
 
	gCmdNs
 {

11 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tTCLAP
::
	tV®ueArg
<¡d::¡ršg>*> 
	tArgM­
;

12 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tTCLAP
::
	tMuÉiArg
<¡d::¡ršg>*> 
	tMuÉiM­
;

13 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tTCLAP
::
	tSw™chArg
*> 
	tO±M­
;

15 
	g¡d
::
	t£t
<
	t¡d
::
	t¡ršg
> 
	tNameS‘
;

17 
	gArgM­
::
	t™”©Ü
 
	tArgM­I‹r
;

18 
	gMuÉiM­
::
	t™”©Ü
 
	tMuÉiM­I‹r
;

19 
	gO±M­
::
	t™”©Ü
 
	tO±M­I‹r
;

21 şas 
	cO±Mgr
 {

22 
	gpublic
:

25 
O±Mgr
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

26 cÚ¡ 
¡d
::
¡ršg
 &
msg
);

27 ~
O±Mgr
();

29 
	g¡d
::
¡ršg
 
g‘Name
() const;

30 
£tName
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

31 
	g¡d
::
¡ršg
 
g‘Msg
() const;

33 
	g¡d
::
¡ršg
 
g‘V®
(cÚ¡ 
¡d
::¡ršg &
Çme
) const;

34 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> *
g‘MuÉiV®
(cÚ¡ std::¡ršg &
Çme
) const;

35 
boŞ
 
g‘O±V®
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) const;

37 
boŞ
 
»gArg
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

38 cÚ¡ 
¡d
::
¡ršg
 &
desc
,

39 cÚ¡ 
¡d
::
¡ršg
 &
ty³_desc
,

40 cÚ¡ 
¡d
::
¡ršg
 &
æag
 = "",

41 
boŞ
 
is_»q
 = 
çl£
,

42 
boŞ
 
is_muÉi
 = 
çl£
);

44 
boŞ
 
»gO±
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

45 cÚ¡ 
¡d
::
¡ršg
 &
desc
,

46 
boŞ
 
v®
 = 
çl£
,

47 cÚ¡ 
¡d
::
¡ršg
 &
æag
 = "");

48 
·r£
(
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gs
);

50 
	g´iv©e
:

51 
¡d
::
¡ršg
 
Çme_
;

53 
	gTCLAP
::
CmdLše
 *
İt_
;

54 
ArgM­
 
	g¬g_m­_
;

55 
MuÉiM­
 
	gmuÉi_m­_
;

56 
O±M­
 
	gİt_m­_
;

58 
NameS‘
 
	gÇme_£t_
;

59 
NameS‘
 
	gæag_£t_
;

62 
šlše
 
	gO±Mgr
::
O±Mgr
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

63 cÚ¡ 
¡d
::
¡ršg
 &
msg
) {

64 
Çme_
 = 
Çme
;

65 
	gİt_
 = 
Ãw
 
TCLAP
::
CmdLše
(
msg
);

68 
šlše
 
	gO±Mgr
::~
	$O±Mgr
() {

69 
d–‘e
 
İt_
;

70 
	}
}

72 
šlše
 
	g¡d
::
¡ršg
 
O±Mgr
::
	$g‘Name
() const {

73  
Çme_
;

74 
	}
}

76 
šlše
 
	gO±Mgr
::
£tName
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

77 
Çme_
 = 
Çme
;

80 
šlše
 
	g¡d
::
¡ršg
 
O±Mgr
::
	$g‘Msg
() const {

81  
İt_
->
	`g‘Mes§ge
();

82 
	}
}

	@core/src/atpg.cpp

18 
	~<şim™s
>

20 
	~"©pg.h
"

22 
usšg
 
Çme¥aû
 
	g¡d
;

24 
usšg
 
Çme¥aû
 
	gCÜeNs
;

26 
boŞ
 
	gAg
::
	$Tpg
() {

27 
	`š™
();

29 
AgStus
 
¡©us
 = 
DECISION
;

30 
¡©us
!=
EXIT
) {

31 
¡©us
) {

32 
IMPLY_AND_CHECK
: {

33 
¡©us
 = 
DECISION
;

34 if(!
	`Im¶y
()) {

35 
¡©us
 = 
BACKTRACK
;

38 if(
sim_
->
	`IsFauÉAtPo
()è 
Œue
;

40 if(
sim_
->
	`IsGutOuutAtX
()) ;

42 
V®ue
 
fv
 = 
sim_
->
	`G‘GutV®
();

43 if(
fv
!=
D
 && fv!=
B
) {

44 
¡©us
 = 
BACKTRACK
;

49 
DECISION
:

50 if(
sim_
->
	`IsGutOuutAtX
()) {

51 
	`FauÉAùiv©e
();

52 
¡©us
 = 
BACKTRACE
;

55 if(!
	`DDrive
()è
¡©us
 = 
BACKTRACK
;

56 
¡©us
 = 
BACKTRACE
;

59 
BACKTRACE
:

60 
¡©us
 = 
IMPLY_AND_CHECK
;

61 if(!
	`BackŒaû
())

62 
¡©us
 = 
BACKTRACK
;

64 
BACKTRACK
:

65 if(!
	`BackT¿ck
()è 
çl£
;

66 
¡©us
 = 
IMPLY_AND_CHECK
;

71  
Œue
;

72 
	}
}

74 
	gAg
::
	$G‘P©‹º
(
P©‹º
& 
p
) const {

75 
sim_
->
	`G‘PiP©‹º
(
p
);

76 
	}
}

78 
	gAg
::
	$š™
() {

79 
back_Œack_couÁ
 = 0;

81 
sim_
->
	`In™
();

82 
	}
}

84 
boŞ
 
	gAg
::
	$Im¶y
() {

85  
sim_
->
	`Ev’tDriv’Sim
();

86 
	}
}

88 
boŞ
 
	gAg
::
	$FauÉAùiv©e
() {

89 
G©e
 *
fg
 = 
cœ_
->
g©es
[
rg‘_çuÉ_
->
fg©e_id
];

90 
size_t
 
å
 = 
rg‘_çuÉ_
->
åid
;

91 
V®ue
 
fv
 = 
rg‘_çuÉ_
->
fv®
;

93 if(
å
) {

94 
V®ue
 
v
 = 
fg
->
fis
[
å
-1]->
v®
;

95 if(
v
==
X
) {

96 
V®ue
 
objv
 = (
fv
==
D
)?
H
:
L
;

97 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
fis
[
å
-1]->
id
;

98 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

99  
Œue
;

103 
V®ue
 
objv
 = 
	`Ev®NÙ
(
fg
->
ouut_ùr_v®ue
);

106 if(
objv
==
X
è 
Œue
;

107 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
id
;

108 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

109  
Œue
;

114 
V®ue
 
objv
 = (
fv
==
D
)?
H
:
L
;

115 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
id
;

116 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

117  
Œue
;

119 
	}
}

121 
boŞ
 
	gAg
::
	$DDrive
() {

122 
G©eVec
 
däÚt
;

123 
sim_
->
	`G‘DFrÚt›r
(
däÚt
);

125 if(
däÚt
.
	`size
()==0è 
çl£
;

127 
G©e
 *
gtİrİ
 = 
NULL
;

128 
ob£rv
 = 
INT_MIN
;

129 
size_t
 
i
=0; i<
däÚt
.
	`size
(); i++)

130 if(
däÚt
[
i
]->
lvl
>
ob£rv
) {

131 
gtİrİ
 = 
däÚt
[
i
];

132 
ob£rv
 = 
däÚt
[
i
]->
lvl
;

135 
cu¼’t_obj_
.
fœ¡
 = 
gtİrİ
->
id
;

136 
cu¼’t_obj_
.
£cÚd
 = 
	`Ev®NÙ
(
gtİrİ
->
ouut_ùr_v®ue
);

138  
Œue
;

139 
	}
}

141 
boŞ
 
	gAg
::
	$BackŒaû
() {

142 
G©e
 *
g
 = 
cœ_
->
g©es
[
cu¼’t_obj_
.
fœ¡
];

143 
V®ue
 
objv
 = 
cu¼’t_obj_
.
£cÚd
;

144 !(
g
->
ty³
==
GATE_PI
 || g->ty³==
GATE_PPI
)) {

145 if(
g
->
ouut_ùr_v®ue
==
X
) {

146 if(
g
->
ty³
==
GATE_NOT
)

147 
objv
 = 
	`Ev®NÙ
(objv);

148 
g
 = g->
fis
[0];

152 
G©e
 *
gÃxt
 = 
NULL
;

153 ià(
objv
==
g
->
ouut_ùr_v®ue
) {

157 
ùr_abl™y
 = 
INT_MAX
;

158 
size_t
 
n
=0;‚<
g
->
nfi
;‚++) {

159 if(
g
->
fis
[
n
]->
v®
==
X
 && g->fis[n]->
lvl
<
ùr_abl™y
) {

160 
gÃxt
 = 
g
->
fis
[
n
];

161 
ùr_abl™y
 = 
g
->
fis
[
n
]->
lvl
;

165 ià(
objv
==
	`Ev®NÙ
(
g
->
ouut_ùr_v®ue
)) {

169 
ùr_šabl™y
 = 
INT_MIN
;

170 
size_t
 
n
=0;‚<
g
->
nfi
;‚++) {

171 if(
g
->
fis
[
n
]->
v®
==
X
 && g->fis[n]->
lvl
>
ùr_šabl™y
) {

172 
gÃxt
 = 
g
->
fis
[
n
];

173 
ùr_šabl™y
 = 
g
->
fis
[
n
]->
lvl
;

178 if(
g
->
ty³
==
GATE_NAND
 || g->ty³==
GATE_NOR
)

179 
objv
 = 
	`Ev®NÙ
(objv);

181 
g
 = 
gÃxt
;

185 
g
->
v®
 = 
objv
;

186 if(
rg‘_çuÉ_
->
fg©e_id
=ğ
g
->
id
)

187 
sim_
->
	`PushEv’t
(
g
->
id
);

189 
sim_
->
	`PushFªoutEv’t
(
g
->
id
);

191  
Œue
;

192 
	}
}

194 
boŞ
 
	gAg
::
	$BackT¿ck
() {

197  
çl£
;

198 
	}
}

	@core/src/atpg.h

19 #iâdeà
_CORE_ATPG_H_


20 
	#_CORE_ATPG_H_


	)

22 
	#_MAX_BACK_TRACK_LIMIT_
 256

	)

24 
	~"simuÏtÜ.h
"

26 
Çme¥aû
 
	gCÜeNs
 {

28 
	g¡d
::
	t·œ
<, 
	tV®ue
> 
	tObjeùive
;

30 şas 
	cAg
 {

31 
	gpublic
:

32 
	eAgStus
 { 
IMPLY_AND_CHECK
 = 0,

33 
	gDECISION
,

34 
	gBACKTRACE
,

35 
	gBACKTRACK
,

36 
	gEXIT
 };

38 
Ag
(
Cœcu™
 *
cœ
, 
FauÉ
* 
f
);

39 ~
Ag
();

41 
boŞ
 
Tpg
();

43 
G‘P©‹º
(
P©‹º
& 
p
) const;

45 
	g´Ùeùed
:

46 
š™
();

47 
boŞ
 
Im¶y
();

48 
boŞ
 
FauÉAùiv©e
();

49 
boŞ
 
DDrive
();

50 
boŞ
 
BackŒaû
();

51 
boŞ
 
BackT¿ck
();

53 
Cœcu™
 *
	gcœ_
;

54 
SimuÏtÜ
 *
	gsim_
;

56 
size_t
 
	gback_Œack_lim™
;

57 
size_t
 
	gback_Œack_couÁ
;

59 
FauÉ
 *
	grg‘_çuÉ_
;

61 
Objeùive
 
	gcu¼’t_obj_
;

64 
šlše
 
	gAg
::
	$Ag
(
Cœcu™
 *
cœ
, 
FauÉ
 *
f
) {

65 
cœ_
 = 
cœ
;

66 
rg‘_çuÉ_
 = 
f
;

67 
back_Œack_lim™
 = 
_MAX_BACK_TRACK_LIMIT_
;

69 
sim_
 = 
Ãw
 
	`SimuÏtÜ
(
cœ_
, 
rg‘_çuÉ_
);

70 
	}
}

72 
šlše
 
	gAg
::~
	$Ag
() {

73 
d–‘e
 
sim_
;

74 
	}
}

	@core/src/atpg_mgr.cpp

19 
	~"©pg_mgr.h
"

21 
usšg
 
Çme¥aû
 
	g¡d
;

23 
usšg
 
Çme¥aû
 
	gCÜeNs
;

25 
boŞ
 
	gAgMgr
::
	$Run
() {

26 if(!
·t_mgr
è·t_mg¸ğ
Ãw
 
	`P©‹ºMgr
(
cœ
);

28 
size_t
 
n
=0;‚<
f_mgr
->
	`g‘FauÉNum
();‚++) {

29 
Ag
 *
©pg
 = 
Ãw
 
	`Ag
(
cœ
, 
f_mgr
->
	`g‘FauÉ
(
n
));

30 if(
©pg
->
	`Tpg
()) {

31 
P©‹º
 *
p
 = 
Ãw
 Pattern;

32 
©pg
->
	`G‘P©‹º
(*
p
);

34 
·t_mgr
->
·ts
.
	`push_back
(
p
);

38 
cout
 << "*** BACKTRACK NEEDED!! \n";

40 
©pgs_
.
	`push_back
(
©pg
);

42 
	}
}

	@core/src/atpg_mgr.h

1 #iâdeà
_CORE_ATPG_MGR_H_


2 
	#_CORE_ATPG_MGR_H_


	)

4 
	~"©pg.h
"

6 
Çme¥aû
 
	gCÜeNs
 {

8 
	g¡d
::
	tveùÜ
<
	tAg
*> 
	tAgVec
;

10 şas 
	cAgMgr
 {

11 
	gpublic
:

12 
AgMgr
();

13 ~
AgMgr
();

15 
boŞ
 
Run
();

17 
Cœcu™
 *
	gcœ
;

19 
FauÉMgr
 *
	gf_mgr
;

20 
P©‹ºMgr
 *
	g·t_mgr
;

22 
	g´iv©e
:

23 
AgVec
 
©pgs_
;

26 
šlše
 
	gAgMgr
::
	$AgMgr
() {

27 
cœ
 = 
NULL
;

29 
f_mgr
 = 
NULL
;

30 
·t_mgr
 = 
NULL
;

31 
	}
}

33 
šlše
 
	gAgMgr
::~
	$AgMgr
() {

35 if(
cœ
è
d–‘e
 cir;

37 if(
f_mgr
è
d–‘e
 f_mgr;

38 if(
·t_mgr
è
d–‘e
…at_mgr;

40 
size_t
 
i
=0; i<
©pgs_
.
	`size
(); i++)

41 
d–‘e
 
©pgs_
[
i
];

42 
	}
}

	@core/src/circuit.h

1 #iâdeà
_CORE_CIRCUIT_H_


2 
	#_CORE_CIRCUIT_H_


	)

4 
	~"g©e.h
"

6 
Çme¥aû
 
	gCÜeNs
 {

8 
	g¡d
::
	tveùÜ
<> 
	tIdVec
;

10 şas 
	cCœcu™
 {

11 
	gpublic
:

12 ~
Cœcu™
();

14 
size_t
 
	gÅi
;

15 
size_t
 
	gÅpi
;

16 
size_t
 
	gÅo
;

17 
size_t
 
	gÆogic
;

19 
size_t
 
	gÁÙg©e
;

20 
size_t
 
	gÁÙlvl
;

22 
IdVec
 
	gpis
;

23 
IdVec
 
	gµis
;

24 
IdVec
 
	gpos
;

25 
IdVec
 
	gµos
;

27 
G©eVec
 
	gg©es
;

31 
šlše
 
	gCœcu™
::~
	$Cœcu™
() {

34 
	}
}

	@core/src/decision_tree.h

19 #iâdeà
_CORE_DECISION_TREE_


20 
	#_CORE_DECISION_TREE_


	)

22 
	~<¡ack
>

24 
Çme¥aû
 
	gCÜeNs
 {

	@core/src/fault.cpp

1 
	~"çuÉ.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

5 
usšg
 
Çme¥aû
 
	gCÜeNs
;

7 
	gFauÉMgr
::
	$AddFauÉ
(
G©e
 *
g
, 
size_t
 
p
, 
V®ue
 
v
) {

9 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
g
->
id
, 
p
, 
v
));

10 
	}
}

12 
	gFauÉMgr
::
	$AddFauÉ
(
G©e
 *
g
, 
V®ue
 
v
) {

14 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
g
->
id
, 0, 
v
));

15 
	}
}

17 
	gFauÉMgr
::
	$AddAÎFauÉs
(
Cœcu™
 *
cœ
) {

18 
size_t
 
i
=0; i<
cœ
->
g©es
.
	`size
(); i++) {

19 
G©e
 *
g
 = 
cœ
->
g©es
[
i
];

20 
j
=0; j<=
g
->
nfi
; j++) {

21 
	`AddFauÉ
(
g
, 
j
, 
D
);

22 
	`AddFauÉ
(
g
, 
j
, 
B
);

25 
	}
}

	@core/src/fault.h

1 #iâdeà
_CORE_FAULT_H_


2 
	#_CORE_FAULT_H_


	)

4 
	~"cœcu™.h
"

6 
Çme¥aû
 
	gCÜeNs
 {

8 
şass
 
	gFauÉ
;

10 
	g¡d
::
	tveùÜ
<
	tFauÉ
 *> 
	tFauÉVec
;

13 şas 
	cFauÉ
 {

14 
	gpublic
:

16 
	eStus
 { 
UD
 = 0, 
	gDT
, 
	gAU
, 
	gRE
, 
	gAB
 };

18 
FauÉ
();

19 
FauÉ
(
fgid
, 
size_t
 
å
, 
V®ue
 
fv
);

20 ~
FauÉ
();

22 
	gfg©e_id
;

23 
V®ue
 
	gfv®
;

24 
size_t
 
	gåid
;

26 
Stus
 
	g¡©us
;

29 şas 
	cFauÉMgr
 {

30 
	gpublic
:

31 ~
FauÉMgr
();

33 
size_t
 
g‘FauÉNum
() const;

34 
FauÉ
* 
g‘FauÉ
(
size_t
 
n
) const;

36 
AddFauÉ
(
G©e
 *
g
, 
size_t
 
p
, 
V®ue
 
v
);

37 
AddFauÉ
(
G©e
 *
g
, 
V®ue
 
v
);

38 
AddAÎFauÉs
(
Cœcu™
 *
cœ
);

39 
	g´iv©e
:

40 
FauÉVec
 
çuÉs_
;

43 
šlše
 
	gFauÉ
::
	$FauÉ
() {

44 
¡©us
 = 
UD
;

45 
	}
}

47 
šlše
 
	gFauÉ
::~
	$FauÉ
() {

48 
	}
}

50 
šlše
 
FauÉ
::
	$FauÉ
(
fgid
, 
size_t
 
å
, 
V®ue
 
fv
) {

51 
fg©e_id
 = 
fgid
;

52 
åid
 = 
å
;

53 
fv®
 = 
fv
;

55 
¡©us
 = 
UD
;

56 
	}
}

58 
šlše
 
	gFauÉMgr
::~
	$FauÉMgr
() {

59 
size_t
 
i
=0; i<
çuÉs_
.
	`size
(); i++)

60 
d–‘e
 
çuÉs_
[
i
];

61 
	}
}

63 
šlše
 
size_t
 
	gFauÉMgr
::
	$g‘FauÉNum
() const {

64  
çuÉs_
.
	`size
();

65 
	}
}

67 
šlše
 
FauÉ
 *
	gFauÉMgr
::
	$g‘FauÉ
(
size_t
 
n
) const {

68  (
n
<
	`g‘FauÉNum
())?
çuÉs_
[n]:
NULL
;

69 
	}
}

	@core/src/gate.cpp

1 
	~"g©e.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

5 
usšg
 
Çme¥aû
 
	gCÜeNs
;

7 
V®ue
 
	gAndG©e
::
	$GoodEv®
() const {

8 
veùÜ
<
V®ue
> 
v®s
;

9 
size_t
 
i
=0; i<
fis
.
	`size
(); i++)

10 
v®s
.
	`push_back
(
fis
[
i
]->
v®
);

11  
	`Ev®AndN
(
v®s
);

12 
	}
}

14 
V®ue
 
	gOrG©e
::
	$GoodEv®
() const {

15 
veùÜ
<
V®ue
> 
v®s
;

16 
size_t
 
i
=0; i<
fis
.
	`size
(); i++)

17 
v®s
.
	`push_back
(
fis
[
i
]->
v®
);

18  
	`Ev®OrN
(
v®s
);

19 
	}
}

21 
V®ue
 
	gNªdG©e
::
	$GoodEv®
() const {

22 
veùÜ
<
V®ue
> 
v®s
;

23 
size_t
 
i
=0; i<
fis
.
	`size
(); i++)

24 
v®s
.
	`push_back
(
fis
[
i
]->
v®
);

25  
	`Ev®NªdN
(
v®s
);

26 
	}
}

28 
V®ue
 
	gNÜG©e
::
	$GoodEv®
() const {

29 
veùÜ
<
V®ue
> 
v®s
;

30 
size_t
 
i
=0; i<
fis
.
	`size
(); i++)

31 
v®s
.
	`push_back
(
fis
[
i
]->
v®
);

32  
	`Ev®NÜN
(
v®s
);

33 
	}
}

35 
V®ue
 
	gNÙG©e
::
	$GoodEv®
() const {

36  
	`Ev®NÙ
(
fis
[0]->
v®
);

37 
	}
}

39 
V®ue
 
	gPiG©e
::
	$GoodEv®
() const {

40  
v®
;

41 
	}
}

43 
V®ue
 
	gPpiG©e
::
	$GoodEv®
() const {

44  
v®
;

45 
	}
}

47 
V®ue
 
	gPoG©e
::
	$GoodEv®
() const {

48  
fis
[0]->
v®
;

49 
	}
}

51 
V®ue
 
	gPpoG©e
::
	$GoodEv®
() const {

52  
fis
[0]->
v®
;

53 
	}
}

	@core/src/gate.h

1 #iâdeà
_CORE_GATE_H_


2 
	#_CORE_GATE_H_


	)

4 
	~"logic.h
"

6 
Çme¥aû
 
	gCÜeNs
 {

8 
şass
 
	gG©e
;

10 
	g¡d
::
	tveùÜ
<
	tG©e
 *> 
	tG©eVec
;

12 
	eG©eTy³
 { 
	gNA
 = -1,

13 
	gGATE_PI
, 
	gGATE_PO
,

14 
	gGATE_PPI
, 
	gGATE_PPO
,

15 
	gGATE_NOT
,

16 
	gGATE_AND
, 
	gGATE_NAND
, 
	gGATE_OR
, 
	gGATE_NOR
 };

18 şas 
	cG©e
 {

19 
	gpublic
:

21 
G©e
(
G©eTy³
 
typ
);

22 
	gvœtu®
 ~
G©e
();

24 
	gid
;

25 
	glvl
;

26 
G©eTy³
 
	gty³
;

28 
size_t
 
	gnfi
;

29 
size_t
 
	gnfo
;

30 
G©eVec
 
	gfis
;

31 
G©eVec
 
	gfos
;

33 
P¬aV®ue
 
	ggl
;

34 
P¬aV®ue
 
	ggh
;

35 
P¬aV®ue
 
	gæ
;

36 
P¬aV®ue
 
	gfh
;

37 
V®ue
 
	gv®
;

39 
V®ue
 
	gùr_v®ue
;

40 
V®ue
 
	gouut_ùr_v®ue
;

42 
vœtu®
 
V®ue
 
GoodEv®
() const = 0;

46 şas 
	cAndG©e
 : 
public
 
G©e
 {

47 
public
:

48 
AndG©e
(): 
G©e
(
GATE_AND
) {

49 
ùr_v®ue
 = 
L
;

50 
	gouut_ùr_v®ue
 = 
L
;

52 ~
AndG©e
() {}

53 
V®ue
 
GoodEv®
() const;

56 şas 
	cOrG©e
 : 
public
 
G©e
 {

57 
public
:

58 
OrG©e
(): 
G©e
(
GATE_OR
) {

59 
ùr_v®ue
 = 
H
;

60 
	gouut_ùr_v®ue
 = 
H
;

62 ~
OrG©e
() {}

63 
V®ue
 
GoodEv®
() const;

66 şas 
	cNªdG©e
 : 
public
 
G©e
 {

67 
public
:

68 
NªdG©e
(): 
G©e
(
GATE_NAND
) {

69 
ùr_v®ue
 = 
L
;

70 
	gouut_ùr_v®ue
 = 
H
;

72 ~
NªdG©e
() {}

73 
V®ue
 
GoodEv®
() const;

76 şas 
	cNÜG©e
 : 
public
 
G©e
 {

77 
public
:

78 
NÜG©e
(): 
G©e
(
GATE_NOR
) {

79 
ùr_v®ue
 = 
H
;

80 
	gouut_ùr_v®ue
 = 
L
;

82 ~
NÜG©e
() {}

83 
V®ue
 
GoodEv®
() const;

86 şas 
	cNÙG©e
 : 
public
 
G©e
 {

87 
public
:

88 
NÙG©e
(): 
G©e
(
GATE_NOT
) {}

89 ~
NÙG©e
() {}

90 
V®ue
 
GoodEv®
() const;

93 şas 
	cPiG©e
 : 
public
 
G©e
 {

94 
public
:

95 
PiG©e
(): 
G©e
(
GATE_PI
) {}

96 ~
PiG©e
() {}

97 
V®ue
 
GoodEv®
() const;

100 şas 
	cPoG©e
 : 
public
 
G©e
 {

101 
public
:

102 
PoG©e
(): 
G©e
(
GATE_PO
) {}

103 ~
PoG©e
() {}

104 
V®ue
 
GoodEv®
() const;

107 şas 
	cPpiG©e
 : 
public
 
G©e
 {

108 
public
:

109 
PpiG©e
(): 
G©e
(
GATE_PPI
) {}

110 ~
PpiG©e
() {}

111 
V®ue
 
GoodEv®
() const;

114 şas 
	cPpoG©e
 : 
public
 
G©e
 {

115 
public
:

116 
PpoG©e
(): 
G©e
(
GATE_PPO
) {}

117 ~
PpoG©e
() {}

118 
V®ue
 
GoodEv®
() const;

121 
šlše
 
	gG©e
::
	$G©e
(
G©eTy³
 
typ
) {

122 
ty³
 = 
typ
;

123 
v®
 = 
X
;

125 
ùr_v®ue
 = 
X
;

126 
ouut_ùr_v®ue
 = 
X
;

127 
	}
}

129 
šlše
 
	gG©e
::~
	$G©e
() {

130 
	}
}

	@core/src/logic.h

1 #iâdeà
_CORE_LOGIC_H_


2 
	#_CORE_LOGIC_H_


	)

4 
	~<io¡»am
>

5 
	~<veùÜ
>

6 
	~<c¡dio
>

7 
	~<c¡d¬g
>

9 
Çme¥aû
 
	gCÜeNs
 {

11 
	tV®ue
;

12 
	tP¬aV®ue
;

15 cÚ¡ 
V®ue
 
	gL
 = 0;

16 cÚ¡ 
V®ue
 
	gH
 = 1;

17 cÚ¡ 
V®ue
 
	gX
 = 2;

18 cÚ¡ 
V®ue
 
	gD
 = 3;

19 cÚ¡ 
V®ue
 
	gB
 = 4;

21 cÚ¡ 
P¬aV®ue
 
	gPARA_L
 = 0;

22 cÚ¡ 
P¬aV®ue
 
	gPARA_H
 = ~
PARA_L
;

23 cÚ¡ 
size_t
 
	gBYTE_SIZE
 = 8;

24 cÚ¡ 
size_t
 
	gWORD_SIZE
 = (
P¬aV®ue
è* 
BYTE_SIZE
;

26 cÚ¡ 
V®ue
 
	gNÙM­
[5] = { 
H
, 
L
, 
X
, 
B
, 
D
 };

28 cÚ¡ 
V®ue
 
	gAndM­
[5][5] = {

29 { 
L
, L, L, L, L },

30 { 
L
, 
H
, 
X
, 
D
, 
B
 },

31 { 
L
, 
X
, X, X, X },

32 { 
L
, 
D
, 
X
, D, L },

33 { 
L
, 
B
, 
X
, L, B }

36 cÚ¡ 
V®ue
 
	gOrM­
[5][5] = {

37 { 
L
, 
H
, 
X
, 
D
, 
B
 },

38 { 
H
, H, H, H, H },

39 { 
X
, 
H
, X, X, X },

40 { 
D
, 
H
, 
X
, D, H },

41 { 
B
, 
H
, 
X
, H, B }

52 cÚ¡ 
V®ue
 
	gNªdM­
[5][5] = {

53 { 
H
, H, H, H, H },

54 { 
H
, 
L
, 
X
, 
B
, 
D
 },

55 { 
H
, 
X
, X, X, X },

56 { 
H
, 
B
, 
X
, B, H },

57 { 
H
, 
D
, 
X
, H, D }

60 cÚ¡ 
V®ue
 
	gNÜM­
[5][5] = {

61 { 
H
, 
L
, 
X
, 
B
, 
D
 },

62 { 
L
, L, L, L, L },

63 { 
X
, 
L
, X, X, X },

64 { 
B
, 
L
, 
X
, B, L },

65 { 
D
, 
L
, 
X
, L, D }

76 
šlše
 
Pršt3V®ue
(
V®ue
 
v
) {

77 
	gv
) {

78 
	gL
:

79 
B
:

80 
¡d
::
cout
 << "0";

82 
	gH
:

83 
D
:

84 
¡d
::
cout
 << "1";

86 
	gX
:

87 
¡d
::
cout
 << "X";

92 
šlše
 
Pršt5V®ue
(
V®ue
 
v
) {

93 
	gv
) {

94 
	gL
:

95 
H
:

96 
¡d
::
cout
 << (è
v
;

98 
	gX
:

99 
¡d
::
cout
 << "X";

101 
	gD
:

102 
¡d
::
cout
 << "D";

104 
	gB
:

105 
¡d
::
cout
 << "B";

110 
šlše
 
boŞ
 
G‘B™V®
(
P¬aV®ue
 
pv
, 
pos
) {

111 
P¬aV®ue
 
	gmask
 = 0x01;

112 
	gmask
 <<ğ
pos
;

113  
	gpv
 & 
	gmask
;

116 
šlše
 
S‘B™V®
(
P¬aV®ue
 &
pv
, 
boŞ
 
v®ue
 ,
pos
) {

117 
P¬aV®ue
 
	gmask
 = 0x01;

118 
	gmask
 <<ğ
pos
;

119 ià(
	gv®ue
è
	gpv
 |ğ
mask
;

120 
	gpv
 &ğ~
mask
;

123 
šlše
 
V®ue
 
Ev®NÙ
(V®u
v
){

124  
	gNÙM­
[
v
];

127 
šlše
 
V®ue
 
Ev®AndN
(
size_t
 
n
...) {

128 ià(
	gn
<2è 
	gX
;

130 
V®ue
 
	g»t
 = 
X
;

131 
va_li¡
 
	gv®s
;

132 
va_¡¬t
(
v®s
, 
n
);

134 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

135 
V®ue
 
	gv®2
 = (è
va_¬g
(
v®s
, );

136 
	g»t
 = 
AndM­
[
v®1
][
v®2
];

137 
size_t
 
	gi
=2; i<
	gn
; i++) {

138 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

139 
	g»t
 = 
AndM­
[
»t
][
v®1
];

141 
va_’d
(
v®s
);

142  
	g»t
;

145 
šlše
 
V®ue
 
Ev®OrN
(
size_t
 
n
...) {

146 ià(
	gn
<2è 
	gX
;

148 
V®ue
 
	g»t
 = 
X
;

149 
va_li¡
 
	gv®s
;

150 
va_¡¬t
(
v®s
, 
n
);

152 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

153 
V®ue
 
	gv®2
 = (è
va_¬g
(
v®s
, );

154 
	g»t
 = 
OrM­
[
v®1
][
v®2
];

155 
size_t
 
	gi
=2; i<
	gn
; i++) {

156 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

157 
	g»t
 = 
OrM­
[
»t
][
v®1
];

159  
	g»t
;

162 
šlše
 
V®ue
 
Ev®NªdN
(
size_t
 
n
...) {

163 ià(
	gn
<2è 
	gX
;

165 
V®ue
 
	g»t
 = 
X
;

166 
va_li¡
 
	gv®s
;

167 
va_¡¬t
(
v®s
, 
n
);

169 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

170 
V®ue
 
	gv®2
 = (è
va_¬g
(
v®s
, );

171 
	g»t
 = 
NªdM­
[
v®1
][
v®2
];

172 
size_t
 
	gi
=2; i<
	gn
; i++) {

173 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

174 
	g»t
 = 
NªdM­
[
»t
][
v®1
];

176  
	g»t
;

179 
šlše
 
V®ue
 
Ev®NÜN
(
size_t
 
n
...) {

180 ià(
	gn
<2è 
	gX
;

182 
V®ue
 
	g»t
 = 
X
;

183 
va_li¡
 
	gv®s
;

184 
va_¡¬t
(
v®s
, 
n
);

186 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

187 
V®ue
 
	gv®2
 = (è
va_¬g
(
v®s
, );

188 
	g»t
 = 
NÜM­
[
v®1
][
v®2
];

189 
size_t
 
	gi
=2; i<
	gn
; i++) {

190 
V®ue
 
	gv®1
 = (è
va_¬g
(
v®s
, );

191 
	g»t
 = 
NÜM­
[
»t
][
v®1
];

193  
	g»t
;

196 
šlše
 
V®ue
 
Ev®AndN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

197 if(
v®s
.
size
()<2è 
X
;

199 
V®ue
 
	g»t
 = 
AndM­
[
v®s
[0]][vals[1]];

200 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

201 
	g»t
 = 
AndM­
[
»t
][
v®s
[
n
]];

203  
	g»t
;

206 
šlše
 
V®ue
 
Ev®OrN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

207 if(
v®s
.
size
()<2è 
X
;

209 
V®ue
 
	g»t
 = 
OrM­
[
v®s
[0]][vals[1]];

210 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

211 
	g»t
 = 
OrM­
[
»t
][
v®s
[
n
]];

213  
	g»t
;

216 
šlše
 
V®ue
 
Ev®NªdN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

217 if(
v®s
.
size
()<2è 
X
;

219 
V®ue
 
	g»t
 = 
NªdM­
[
v®s
[0]][vals[1]];

220 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

221 
	g»t
 = 
NªdM­
[
»t
][
v®s
[
n
]];

223  
	g»t
;

226 
šlše
 
V®ue
 
Ev®NÜN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

227 if(
v®s
.
size
()<2è 
X
;

229 
V®ue
 
	g»t
 = 
NÜM­
[
v®s
[0]][vals[1]];

230 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

231 
	g»t
 = 
NÜM­
[
»t
][
v®s
[
n
]];

233  
	g»t
;

	@core/src/logic_test.cpp

1 
	~"logic.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	gCÜeNs
;

6 
	$maš
() {

8 
cout
<<"#AND(H, Lèğ"<<(
size_t
)
	`Ev®AndN
(2, 
H
, 
L
)<<"\t\tAns: 0/L\n";

9 
cout
<<"#AND(H, H, Xèğ"<<(
size_t
)
	`Ev®AndN
(3, 
H
, H, 
X
)<<"\t\tAns: 2/X\n";

10 
cout
<<"#OR(H, H, Xèğ"<<(
size_t
)
	`Ev®OrN
(3, 
H
, H, 
X
)<<"\t\tAns: 1/H\n";

13 
	}
}

	@core/src/pattern.h

19 #iâdeà
_CORE_PATTERN_H_


20 
	#_CORE_PATTERN_H_


	)

22 
	~"çuÉ.h
"

23 
	~"cœcu™.h
"

25 
Çme¥aû
 
	gCÜeNs
 {

27 
şass
 
	gP©‹º
;

29 
	g¡d
::
	tveùÜ
<
	tV®ue
> 
	tV®ueVec
;

30 
	g¡d
::
	tveùÜ
<
	tP©‹º
 *> 
	tP©Vec
;

32 şas 
	cP©‹º
 {

33 
	gpublic
:

38 
V®ueVec
 
pi
;

39 
V®ueVec
 
	gµi
;

40 
V®ueVec
 
	gpo
;

41 
V®ueVec
 
	gµo
;

45 şas 
	cP©‹ºMgr
 {

46 
	gpublic
:

47 
P©‹ºMgr
(
Cœcu™
 *
cœ
);

48 ~
P©‹ºMgr
();

50 
size_t
 
	gÅi
;

51 
size_t
 
	gÅpi
;

52 
size_t
 
	gÅo
;

54 
IdVec
 
	gpi_Üd”
;

55 
IdVec
 
	gµi_Üd”
;

56 
IdVec
 
	gpo_Üd”
;

57 
IdVec
 
	gµo_Üd”
;

59 
P©Vec
 
	g·ts
;

62 
šlše
 
	gP©‹ºMgr
::
	$P©‹ºMgr
(
Cœcu™
 *
cœ
) {

63 
Åi
 = 
cœ
->npi;

64 
Åpi
 = 
cœ
->nppi;

65 
Åo
 = 
cœ
->npo;

67 
pi_Üd”
 = 
cœ
->
pis
;

68 
µi_Üd”
 = 
cœ
->
µis
;

69 
po_Üd”
 = 
cœ
->
pos
;

70 
µo_Üd”
 = 
cœ
->
µos
;

71 
	}
}

73 
šlše
 
	gP©‹ºMgr
::~
	$P©‹ºMgr
() {

74 
size_t
 
i
=0; i<
·ts
.
	`size
(); i++)

75 
d–‘e
 
·ts
[
i
];

76 
	}
}

	@core/src/simulator.cpp

1 
	~"simuÏtÜ.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

5 
usšg
 
Çme¥aû
 
	gCÜeNs
;

7 
boŞ
 
	gSimuÏtÜ
::
	$Ev’tDriv’Sim
() {

8 
size_t
 
l
=0;†<
cœ_
->
ÁÙlvl
;†++) {

9 !
ev’ts_
[
l
].
	`em±y
()) {

10 
G©e
 *
g
 = 
cœ_
->
g©es
[
ev’ts_
[
l
].
	`äÚt
()];

11 
ev’ts_
[
l
].
	`pİ
();

13 
V®ue
 
v
;

14 
v
 = (
g
->
id
==
rg‘_çuÉ_
->
fg©e_id
)?
	`FauÉEv®
(g):g->
	`GoodEv®
();

16 if(
g
->
v®
!=
v
) {

17 
g
->
v®
 = 
v
;

18 
size_t
 
n
=0;‚<
g
->
nfo
;‚++)

19 
	`PushEv’t
(
g
->
fos
[
n
]->
id
);

23  
Œue
;

24 
	}
}

26 
	gSimuÏtÜ
::
	$PushEv’t
(
gid
) {

27 
ev’ts_
[
cœ_
->
g©es
[
gid
]->
lvl
].
	`push
(gid);

28 
	}
}

30 
	gSimuÏtÜ
::
	$PushFªoutEv’t
(
gid
) {

31 
G©e
 *
g
 = 
cœ_
->
g©es
[
gid
];

32 
size_t
 
n
=0;‚<
g
->
nfo
;‚++)

33 
	`PushEv’t
(
g
->
fos
[
n
]->
id
);

34 
	}
}

36 
	gSimuÏtÜ
::
	$G‘DFrÚt›r
(
G©eVec
& 
df
) const {

37 
size_t
 
n
=0;‚<
cœ_
->
ÁÙg©e
;‚++) {

38 
G©e
 *
g
 = 
cœ_
->
g©es
[
n
];

39 if(
g
->
v®
!=
X
) ;

41 
size_t
 
i
=0; i<
g
->
nfi
; i++) {

42 if(
g
->
fis
[
i
]->
v®
==
D
 ||

43 
g
->
fis
[
i
]->
v®
==
B
) {

45 
df
.
	`push_back
(
g
);

50 
	}
}

52 
boŞ
 
	gSimuÏtÜ
::
	$IsFauÉAtPo
() const {

53 
size_t
 
n
=0;‚<
cœ_
->
Åo
;‚++) {

54 
V®ue
 
v
 = 
cœ_
->
g©es
[cœ_->
pos
[
n
]]->
v®
;

55 if(
v
==
D
 || v==
B
è 
Œue
;

58 
size_t
 
n
=0;‚<
cœ_
->
Åpi
;‚++) {

59 
V®ue
 
v
 = 
cœ_
->
g©es
[cœ_->
µos
[
n
]]->
v®
;

60 if(
v
==
D
 || v==
B
è 
Œue
;

62  
çl£
;

63 
	}
}

65 
	gSimuÏtÜ
::
	$G‘PiP©‹º
(
P©‹º
& 
p
) const {

66 
size_t
 
n
=0;‚<
cœ_
->
Åi
;‚++)

67 
p
.
pi
.
	`push_back
(
cœ_
->
g©es
[cœ_->
pis
[
n
]]->
v®
);

68 
size_t
 
n
=0;‚<
cœ_
->
Åpi
;‚++)

69 
p
.
µi
.
	`push_back
(
cœ_
->
g©es
[cœ_->
µis
[
n
]]->
v®
);

70 
	}
}

72 
V®ue
 
	gSimuÏtÜ
::
	$FauÉEv®
(
G©e
* 
g
) const {

73 ià(
rg‘_çuÉ_
->
åid
==0) {

74 
V®ue
 
v
 = 
g
->
	`GoodEv®
();

75 if(
v
==
L
&&
rg‘_çuÉ_
->
fv®
==
B
) v = B;

76 if(
v
==
H
&&
rg‘_çuÉ_
->
fv®
==
D
) v = D;

77  
v
;

80 
size_t
 
å
 = 
rg‘_çuÉ_
->
åid
;

81 
V®ue
 
v
 = 
g
->
fis
[
å
-1]->
v®
;

82 if(
v
==
L
&&
rg‘_çuÉ_
->
fv®
==
B
) v = B;

83 if(
v
==
H
&&
rg‘_çuÉ_
->
fv®
==
D
) v = D;

85 
veùÜ
<
V®ue
> 
vs
; vs.
	`push_back
(
v
);

86 
size_t
 
n
=0;‚<
g
->
nfi
;‚++)

87 if(
n
!=
å
-1)

88 
vs
.
	`push_back
(
g
->
fis
[
n
]->
v®
);

90 
g
->
ty³
) {

91 
GATE_NOT
:

92  
	`Ev®NÙ
(
v
);

94 
GATE_AND
:

95  
	`Ev®AndN
(
vs
);

97 
GATE_OR
:

98  
	`Ev®OrN
(
vs
);

100 
GATE_NAND
:

101  
	`Ev®NªdN
(
vs
);

103 
GATE_NOR
:

104  
	`Ev®NÜN
(
vs
);

106 
GATE_PO
:

107 
GATE_PPO
:

108  
v
;

112 
	}
}

	@core/src/simulator.h

1 #iâdeà
_CORE_SIMULATOR_H_


2 
	#_CORE_SIMULATOR_H_


	)

4 
	~<queue
>

6 
	~"·‰”n.h
"

8 
Çme¥aû
 
	gCÜeNs
 {

10 şas 
	cSimuÏtÜ
 {

11 
	gpublic
:

12 
SimuÏtÜ
(
Cœcu™
 *
cœ
, 
FauÉ
 *
á¬g‘
);

13 ~
SimuÏtÜ
();

15 
In™
();

17 
boŞ
 
Ev’tDriv’Sim
();

18 
PushFªoutEv’t
(
gid
);

19 
PushEv’t
(
gid
);

21 
V®ue
 
G‘GutV®
() const;

22 
boŞ
 
IsGutOuutAtX
() const;

24 
G‘DFrÚt›r
(
G©eVec
& 
df
) const;

26 
boŞ
 
IsFauÉAtPo
() const;

28 
G‘PiP©‹º
(
P©‹º
& 
p
) const;

29 
S‘P©‹ºToPi
(
P©‹º
& 
p
);

31 
	g´iv©e
:

32 
V®ue
 
FauÉEv®
(
G©e
* 
g
) const;

34 
Cœcu™
 *
	gcœ_
;

35 
FauÉ
 *
	grg‘_çuÉ_
;

37 
	g¡d
::
queue
<> *
ev’ts_
;

40 
šlše
 
	gSimuÏtÜ
::
	$SimuÏtÜ
(
Cœcu™
 *
cœ
, 
FauÉ
 *
á¬g‘
) {

41 
cœ_
 = 
cœ
;

42 
rg‘_çuÉ_
 = 
á¬g‘
;

44 
ev’ts_
 = 
Ãw
 
¡d
::
queue
<> [
cœ_
->
ÁÙlvl
];

45 
	}
}

47 
šlše
 
	gSimuÏtÜ
::~
	$SimuÏtÜ
() {

48 
d–‘e
 [] 
ev’ts_
;

49 
	}
}

51 
šlše
 
	gSimuÏtÜ
::
	$In™
() {

52 
size_t
 
n
=0;‚<
cœ_
->
ÁÙg©e
;‚++)

53 
cœ_
->
g©es
[
n
]->
v®
 = 
X
;

54 
	}
}

56 
šlše
 
boŞ
 
	gSimuÏtÜ
::
	$IsGutOuutAtX
() const {

57 
V®ue
 
fv
 = 
cœ_
->
g©es
[
rg‘_çuÉ_
->
fg©e_id
]->
v®
;

58  
fv
==
X
;

59 
	}
}

61 
šlše
 
V®ue
 
	gSimuÏtÜ
::
	$G‘GutV®
() const {

62  
cœ_
->
g©es
[
rg‘_çuÉ_
->
fg©e_id
]->
v®
;

63 
	}
}

	@interface/src/module.h

1 #iâdeà
_INTF_MODULE_H_


2 
	#_INTF_MODULE_H_


	)

4 
	~<io¡»am
>

5 
	~<¡ršg
>

6 
	~<veùÜ
>

7 
	~<m­
>

9 
	~"cÜe/¤c/cœcu™.h
"

11 
Çme¥aû
 
	gIÁfNs
 {

13 
şass
 
	gModuË
;

14 
şass
 
	gC–l
;

15 
şass
 
	gN‘
;

16 
şass
 
	gPÜt
;

18 
	g¡d
::
	tveùÜ
<
	tC–l
 *> 
	tC–lVec
;

19 
	g¡d
::
	tveùÜ
<
	tN‘
 *> 
	tN‘Vec
;

20 
	g¡d
::
	tveùÜ
<
	tPÜt
 *> 
	tPÜtVec
;

22 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tC–l
 *> 
	tC–lM­
;

23 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tN‘
 *> 
	tN‘M­
;

25 
	eC–lTy³
 { 
	gCELL_MODINST
 = 0,

26 
	gCELL_PI
, 
	gCELL_PO
,

27 
	gCELL_PPI
, 
	gCELL_PPO
,

28 
	gCELL_DFF
,

29 
	gCELL_NOT
,

30 
	gCELL_AND
, 
	gCELL_NAND
, 
	gCELL_OR
, 
	gCELL_NOR
,

31 
	gCELL_XOR
, 
	gCELL_XNOR
 };

33 
	ePÜtTy³
 { 
	gPORT_NA
 = -1,

34 
	gPORT_INPUT
, 
	gPORT_OUTPUT
};

36 şas 
	cModuË
 {

37 
	gpublic
:

38 
ModuË
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

39 ~
ModuË
();

41 
g‘Name
(
¡d
::
¡ršg
& 
»t
) const;

43 
size_t
 
g‘PÜtNum
() const;

44 
PÜt
 *
g‘PÜt
(cÚ¡ 
size_t
& 
n
) const;

45 
PÜt
 *
g‘PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const;

46 
addPÜt
(
PÜt
 * cÚ¡ 
p
);

47 
ş—rPÜts
();

49 
size_t
 
g‘C–lNum
() const;

50 
C–l
 *
g‘C–l
(cÚ¡ 
size_t
& 
n
) const;

51 
C–l
 *
g‘C–l
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const;

52 
addC–l
(
C–l
 * cÚ¡ 
c
);

53 
ş—rC–ls
();

55 
size_t
 
g‘N‘Num
() const;

56 
N‘
 *
g‘N‘
(cÚ¡ 
size_t
& 
n
) const;

57 
N‘
 *
g‘N‘
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const;

58 
addN‘
(
N‘
 * cÚ¡ 
n
);

59 
ş—rN‘s
();

61 
	g´Ùeùed
:

63 
¡d
::
¡ršg
 
Çme_
;

65 
PÜtVec
 
	gpÜt_vec_
;

67 
C–lM­
 
	gûÎ_m­_
;

68 
N‘M­
 
	gÃt_m­_
;

72 şas 
	cC–l
 {

73 
	gpublic
:

74 
C–l
(
C–lTy³
 
ty³
);

75 
C–l
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
C–lTy³
 
ty³
);

76 
C–l
(cÚ¡ 
¡d
::
¡ršg
& 
ty³_Çme
);

77 
C–l
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, cÚ¡ std::¡ršg& 
ty³_Çme
);

78 ~
C–l
();

80 
g‘Name
(
¡d
::
¡ršg
& 
»t
) const;

81 
g‘Lev–
() const;

82 
C–lTy³
 
g‘Ty³
() const;

83 
	gCÜeNs
::
G©e
 *
g‘G©e
() const;

85 
£tLev–
(
lvl
);

86 
£tG©e
(
CÜeNs
::
G©e
* 
g
);

88 
size_t
 
g‘PÜtNum
() const;

89 
PÜt
 *
g‘PÜt
(cÚ¡ 
size_t
& 
n
) const;

90 
PÜt
 *
g‘PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const;

91 
addPÜt
(
PÜt
* 
p
);

92 
ş—rPÜts
();

94 
addInN‘
(
N‘
 *
n
);

95 
addOutN‘
(
N‘
 *
n
);

97 
size_t
 
g‘InN‘Num
() const;

98 
N‘
 *
g‘InN‘
(cÚ¡ 
size_t
& 
n
) const;

99 
size_t
 
g‘OutN‘Num
() const;

100 
N‘
 *
g‘OutN‘
(cÚ¡ 
size_t
& 
n
) const;

102 
g‘FªšC–l
(
C–lVec
& 
»t
) const;

103 
boŞ
 
g‘FªoutC–l
(cÚ¡ 
size_t
& 
n
, 
C–lVec
& 
»t
) const;

105 
	g´Ùeùed
:

107 
¡d
::
¡ršg
 
Çme_
;

108 
	g¡d
::
¡ršg
 
ty³_Çme_
;

109 
	gCÜeNs
::
G©e
 *
g©e_
;

112 
	glvl_
;

114 
C–lTy³
 
	gty³_
;

116 
N‘Vec
 
	gš_Ãts_
;

117 
N‘Vec
 
	gout_Ãts_
;

119 
PÜtVec
 
	gpÜt_vec_
;

123 şas 
	cN‘
 {

124 
	gpublic
:

125 
N‘
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

126 ~
N‘
();

128 
g‘Name
(
¡d
::
¡ršg
& 
»t
) const;

130 
C–l
 *
g‘InC–l
() const;

131 
g‘OutC–ls
(
C–lVec
& 
»t
) const;

133 
£tInC–l
(
C–l
 *
c
);

134 
addOutC–l
(
C–l
 *
c
);

139 
	g´Ùeùed
:

141 
¡d
::
¡ršg
 
Çme_
;

143 
PÜt
 *
	gš_pÜt_
;

144 
PÜtVec
 
	gout_pÜts_
;

146 
C–l
 *
	gš_ûÎ_
;

147 
C–lVec
 
	gout_ûÎs_
;

150 şas 
	cPÜt
 {

151 
	gpublic
:

154 
PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

155 
PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
PÜtTy³
 
ty³
);

157 
£tTy³
(
PÜtTy³
 
ty³
);

159 
g‘Name
(
¡d
::
¡ršg
& 
»t
) const;

161 
boŞ
 
S‘InN‘
(
N‘
 *
n
);

162 
boŞ
 
S‘OutN‘
(
N‘
 *
n
);

164 
	g´Ùeùed
:

165 
¡d
::
¡ršg
 
Çme_
;

167 
PÜtTy³
 
	gty³_
;

169 
N‘
 *
	gš_Ãt_
;

170 
N‘
 *
	gout_Ãt_
;

173 
šlše
 
	gModuË
::
ModuË
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

174 
Çme_
 = 
Çme
;

177 
šlše
 
	gModuË
::~
	$ModuË
() {

178 
	`ş—rPÜts
();

179 
	`ş—rC–ls
();

180 
	`ş—rN‘s
();

181 
	}
}

183 
šlše
 
	gModuË
::
g‘Name
(
¡d
::
¡ršg
& 
»t
) const {

184 
»t
 = 
Çme_
;

187 
šlše
 
size_t
 
	gModuË
::
	$g‘PÜtNum
() const {

188  
pÜt_vec_
.
	`size
();

189 
	}
}

191 
šlše
 
PÜt
 *
	gModuË
::
	$g‘PÜt
(cÚ¡ 
size_t
& 
n
) const {

192  
pÜt_vec_
[
n
];

193 
	}
}

195 
šlše
 
PÜt
 *
	gModuË
::
g‘PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const {

196 
PÜt
 *
»t
 = 
NULL
;

197 
size_t
 
	gn
=0;‚<
	gpÜt_vec_
.
size
();‚++) {

198 
	g¡d
::
¡ršg
 
pÜŠame
;

199 
	gpÜt_vec_
[
n
]->
g‘Name
(
pÜŠame
);

200 if(
	gpÜŠame
==
Çme
)

201 
»t
 = 
pÜt_vec_
[
n
];

203  
	g»t
;

206 
šlše
 
	gModuË
::
	$addPÜt
(
PÜt
 * cÚ¡ 
p
) {

207 
pÜt_vec_
.
	`push_back
(
p
);

208 
	}
}

210 
šlše
 
	gModuË
::
	$ş—rPÜts
() {

211 
size_t
 
n
=0;‚<
pÜt_vec_
.
	`size
();‚++)

212 
d–‘e
 
pÜt_vec_
[
n
];

213 
pÜt_vec_
.
	`ş—r
();

214 
	}
}

216 
šlše
 
size_t
 
	gModuË
::
	$g‘C–lNum
() const {

217  
ûÎ_m­_
.
	`size
();

218 
	}
}

220 
šlše
 
C–l
 *
	gModuË
::
	$g‘C–l
(cÚ¡ 
size_t
& 
n
) const {

221 ià(
n
>=
	`g‘C–lNum
()è 
NULL
;

223 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ûÎ_m­_
.
	`begš
();

224 
¡d
::
	`advªû
(
™
, 
n
);

225  
™
->
£cÚd
;

226 
	}
}

228 
šlše
 
C–l
 *
	gModuË
::
g‘C–l
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const {

229 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ûÎ_m­_
.
fšd
(
Çme
);

230  (
	g™
==
ûÎ_m­_
.
’d
())?
NULL
:
™
->
£cÚd
;

233 
šlše
 
	gModuË
::
	$addC–l
(
C–l
 * cÚ¡ 
c
) {

234 
¡d
::
¡ršg
 
úame
;

235 
c
->
	`g‘Name
(
úame
);

236 
ûÎ_m­_
[
úame
] = 
c
;

237 
	}
}

239 
šlše
 
	gModuË
::
	$ş—rC–ls
() {

240 
size_t
 
n
=0;‚<
	`g‘C–lNum
();‚++) {

241 
C–l
 *
c
 = 
	`g‘C–l
(
n
);

242 
d–‘e
 
c
;

244 
ûÎ_m­_
.
	`ş—r
();

245 
	}
}

247 
šlše
 
size_t
 
	gModuË
::
	$g‘N‘Num
() const {

248  
Ãt_m­_
.
	`size
();

249 
	}
}

251 
šlše
 
N‘
 *
	gModuË
::
	$g‘N‘
(cÚ¡ 
size_t
& 
n
) const {

252 if(
n
>=
	`g‘N‘Num
()è 
NULL
;

254 
N‘M­
::
cÚ¡_™”©Ü
 
™
 = 
Ãt_m­_
.
	`begš
();

255 
¡d
::
	`advªû
(
™
, 
n
);

256  
™
->
£cÚd
;

257 
	}
}

259 
šlše
 
N‘
 *
	gModuË
::
g‘N‘
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const {

260 
N‘M­
::
cÚ¡_™”©Ü
 
™
 = 
Ãt_m­_
.
fšd
(
Çme
);

261  (
	g™
==
Ãt_m­_
.
’d
())?
NULL
:
™
->
£cÚd
;

264 
šlše
 
	gModuË
::
	$addN‘
(
N‘
 * cÚ¡ 
n
) {

265 
¡d
::
¡ršg
 
Âame
;

266 
n
->
	`g‘Name
(
Âame
);

267 
Ãt_m­_
[
Âame
] = 
n
;

268 
	}
}

270 
šlše
 
	gModuË
::
	$ş—rN‘s
() {

271 
size_t
 
i
=0; i<
	`g‘N‘Num
(); i++) {

272 
N‘
* 
n
 = 
	`g‘N‘
(
i
);

273 
d–‘e
 
n
;

275 
Ãt_m­_
.
	`ş—r
();

276 
	}
}

278 
šlše
 
	gC–l
::
C–l
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
C–lTy³
 
ty³
) {

279 
	gÇme_
 = 
Çme
;

280 
	gty³_
 = 
ty³
;

281 
	glvl_
 = -1;

284 
šlše
 
	gC–l
::~
	$C–l
(){

285 
	}
}

287 
šlše
 
C–l
::
g‘Name
(
¡d
::
¡ršg
& 
»t
) const {

288 
»t
 = 
Çme_
;

291 
šlše
 
	gC–l
::
	$g‘Lev–
() const {

292  
lvl_
;

293 
	}
}

295 
šlše
 
	gCÜeNs
::
G©e
 *
C–l
::
	$g‘G©e
() const {

296  
g©e_
;

297 
	}
}

299 
šlše
 
C–lTy³
 
	gC–l
::
	$g‘Ty³
() const {

300  
ty³_
;

301 
	}
}

303 
šlše
 
	gC–l
::
	$£tLev–
(
lvl
) {

304 
lvl_
 = 
lvl
;

305 
	}
}

307 
šlše
 
	gC–l
::
£tG©e
(
CÜeNs
::
G©e
* 
g
) {

308 
g©e_
 = 
g
;

311 
šlše
 
	gC–l
::
	$addInN‘
(
N‘
 *
n
) {

312 
š_Ãts_
.
	`push_back
(
n
);

313 
	}
}

315 
šlše
 
	gC–l
::
	$addOutN‘
(
N‘
 *
n
) {

316 
out_Ãts_
.
	`push_back
(
n
);

317 
	}
}

319 
šlše
 
size_t
 
	gC–l
::
	$g‘InN‘Num
() const {

320  
š_Ãts_
.
	`size
();

321 
	}
}

323 
šlše
 
N‘
 *
	gC–l
::
	$g‘InN‘
(cÚ¡ 
size_t
& 
n
) const {

324  (
n
<
	`g‘InN‘Num
())?
š_Ãts_
[n]:
NULL
;

325 
	}
}

327 
šlše
 
size_t
 
	gC–l
::
	$g‘OutN‘Num
() const {

328  
out_Ãts_
.
	`size
();

329 
	}
}

331 
šlše
 
N‘
 *
	gC–l
::
	$g‘OutN‘
(cÚ¡ 
size_t
& 
n
) const {

332  (
n
<
	`g‘OutN‘Num
())?
out_Ãts_
[n]:
NULL
;

333 
	}
}

335 
šlše
 
	gC–l
::
	$g‘FªšC–l
(
C–lVec
& 
»t
) const {

336 
size_t
 
i
=0; i<
	`g‘InN‘Num
(); i++) {

337 
N‘
 *
n
 = 
	`g‘InN‘
(
i
);

338 
»t
.
	`push_back
(
n
->
	`g‘InC–l
());

340 
	}
}

342 
šlše
 
boŞ
 
	gC–l
::
	$g‘FªoutC–l
(cÚ¡ 
size_t
& 
n
, 
C–lVec
& 
»t
) const {

343 
N‘
 *
Ãt
 = 
	`g‘OutN‘
(
n
);

344 if(!
Ãt
è 
çl£
;

346 
Ãt
->
	`g‘OutC–ls
(
»t
);

347  
Œue
;

348 
	}
}

350 
šlše
 
	gN‘
::
N‘
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

351 
Çme_
 = 
Çme
;

354 
šlše
 
	gN‘
::~
	$N‘
() {

355 
	}
}

357 
šlše
 
N‘
::
g‘Name
(
¡d
::
¡ršg
& 
»t
) const {

358 
»t
 = 
Çme_
;

361 
šlše
 
C–l
 *
	gN‘
::
	$g‘InC–l
() const {

362  
š_ûÎ_
;

363 
	}
}

365 
šlše
 
	gN‘
::
	$g‘OutC–ls
(
C–lVec
& 
»t
) const {

366 
»t
 = 
out_ûÎs_
;

367 
	}
}

369 
šlše
 
	gN‘
::
	$£tInC–l
(
C–l
 *
c
) {

370 
š_ûÎ_
 = 
c
;

371 
	}
}

373 
šlše
 
	gN‘
::
	$addOutC–l
(
C–l
 *
c
) {

374 
out_ûÎs_
.
	`push_back
(
c
);

375 
	}
}

377 
šlše
 
	gPÜt
::
PÜt
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

378 
Çme_
 = 
Çme
;

381 
šlše
 
	gPÜt
::
	$£tTy³
(
PÜtTy³
 
ty³
) {

382 
ty³_
 = 
ty³
;

383 
	}
}

385 
šlše
 
	gPÜt
::
g‘Name
(
¡d
::
¡ršg
& 
»t
) const {

386 
»t
 = 
Çme_
;

	@interface/src/netlist.cpp

1 
	~<c¡dio
>

2 
	~<queue
>

3 
	~<®gÜ™hm
>

5 
	~"Ãi¡.h
"

7 
usšg
 
Çme¥aû
 
	g¡d
;

9 
usšg
 
Çme¥aû
 
	gIÁfNs
;

10 
usšg
 
Çme¥aû
 
	gCÜeNs
;

12 
boŞ
 
	gN‘li¡
::
	$·r£
(cÚ¡ 
¡ršg
& 
f’ame
, cÚ¡ sŒšg& 
tİ
) {

13 
	`Ãi¡·r£
(*);

14 
FILE
 *
Ãi¡š
;

16 
Ãi¡š
 = 
	`fİ’
(
f’ame
.
	`c_¡r
(), "r");

17 ià(!
Ãi¡š
) {

19  
çl£
;

22 
sucûss_
 = 
Œue
;

23 
»s
 = 
	`Ãi¡·r£
(
this
);

24 ià(
»s
 != 0) {

25 
	`årštf
(
¡d”r
, "**ERROR Netlist::parse(): wrong input format\n");

26 
sucûss_
 = 
çl£
;

28 
	`fşo£
(
Ãi¡š
);

30  
sucûss_
;

31 
	}
}

33 
boŞ
 
	gN‘li¡
::
	$bud
(
Cœcu™
* 
cœ
) {

35 
	`Ëv–ize
(
ûÎs
);

36 
cœ
->
ÁÙlvl
 = 
ûÎs
[ûÎs.
	`size
()-1]->
	`g‘Lev–
() + 1;

38 
size_t
 
pi_út
 = 0,

39 
µi_út
 = 0,

40 
po_út
 = 0,

41 
logic_út
 = 0;

43 
size_t
 
n
=0;‚<
ûÎs
.
	`size
();‚++) {

44 
C–l
 *
c
 = 
ûÎs
[
n
];

46 
G©e
 *
g
;

47 
c
->
	`g‘Ty³
()) {

48 
CELL_NOT
:

49 
g
 = 
Ãw
 
NÙG©e
;

50 
logic_út
++;

52 
CELL_AND
:

53 
g
 = 
Ãw
 
AndG©e
;

54 
logic_út
++;

56 
CELL_OR
:

57 
g
 = 
Ãw
 
OrG©e
;

58 
logic_út
++;

60 
CELL_NAND
:

61 
g
 = 
Ãw
 
NªdG©e
;

62 
logic_út
++;

64 
CELL_NOR
:

65 
g
 = 
Ãw
 
NÜG©e
;

66 
logic_út
++;

68 
CELL_PI
:

69 
g
 = 
Ãw
 
PiG©e
;

70 
cœ
->
pis
.
	`push_back
(
n
);

71 
pi_út
++;

73 
CELL_PPI
:

74 
g
 = 
Ãw
 
PpiG©e
;

75 
cœ
->
µis
.
	`push_back
(
n
);

76 
µi_út
++;

78 
CELL_PO
:

79 
g
 = 
Ãw
 
PoG©e
;

80 
cœ
->
pos
.
	`push_back
(
n
);

81 
po_út
++;

83 
CELL_PPO
:

84 
g
 = 
Ãw
 
PpoG©e
;

85 
cœ
->
µos
.
	`push_back
(
n
);

91 
g
->
id
 = 
n
;

92 
g
->
lvl
 = 
c
->
	`g‘Lev–
();

94 
cœ
->
g©es
.
	`push_back
(
g
);

95 
c
->
	`£tG©e
(
g
);

98 
cœ
->
Åi
 = 
pi_út
;

99 
cœ
->
Åpi
 = 
µi_út
;

100 
cœ
->
Åo
 = 
po_út
;

101 
cœ
->
Æogic
 = 
logic_út
;

103 
cœ
->
ÁÙg©e
 = 
ûÎs
.
	`size
();

105 
size_t
 
n
=0;‚<
ûÎs
.
	`size
();‚++) {

106 
C–l
 *
c
 = 
ûÎs
[
n
];

107 
G©e
 *
g
 = 
ûÎs
[
n
]->
	`g‘G©e
();

109 
C–lVec
 
çnšs
, 
çnouts
;

110 
c
->
	`g‘FªšC–l
(
çnšs
);

111 
size_t
 
i
=0; i<
c
->
	`g‘OutN‘Num
(); i++) {

112 
c
->
	`g‘FªoutC–l
(
i
, 
çnouts
);

115 
size_t
 
i
=0; i<
çnšs
.
	`size
(); i++)

116 
g
->
fis
.
	`push_back
(
çnšs
[
i
]->
	`g‘G©e
());

117 
g
->
nfi
 = g->
fis
.
	`size
();

119 
size_t
 
i
=0; i<
çnouts
.
	`size
(); i++)

120 
g
->
fos
.
	`push_back
(
çnouts
[
i
]->
	`g‘G©e
());

121 
g
->
nfo
 = g->
fos
.
	`size
();

124  
Œue
;

125 
	}
}

127 
	gN‘li¡
::
	$addModuË
(cÚ¡ * cÚ¡ 
Çme
) {

128 if(!
sucûss_
) ;

129 if(
	`g‘ModuË
(
	`¡ršg
(
Çme
))) {

130 
	`årštf
(
¡d”r
, "**ERROR Netlist::addModule(): ");

131 
	`årštf
(
¡d”r
, "moduË `%s'‡Ì—dyƒxi¡s\n", 
Çme
);

133 
sucûss_
 = 
çl£
;

137 
cu¼’t_
 = 
Ãw
 
	`ModuË
(
	`¡ršg
(
Çme
));

138 
moduË_m­_
[
	`¡ršg
(
Çme
)] = 
cu¼’t_
;

139 
tİ_
 = 
cu¼’t_
;

140 
	}
}

142 
	gN‘li¡
::
	$addPÜts
(
NameLi¡
 * cÚ¡ 
pÜts
) {

143 if(!
sucûss_
) ;

144 if(!
pÜts
) ;

146 
NameLi¡
 *
pÜt
 = 
pÜts
->
h—d
;

147 
pÜt
) {

148 if(
cu¼’t_
->
	`g‘PÜt
(
	`¡ršg
(
pÜt
->
Çme
))) {

149 
¡ršg
 
moduËÇme
;

150 
cu¼’t_
->
	`g‘Name
(
moduËÇme
);

151 
	`årštf
(
¡d”r
, "**ERROR Netlist::addPorts():…ort ");

152 
	`årštf
(
¡d”r
, "`%s/%s' ", 
moduËÇme
.
	`c_¡r
(), 
pÜt
->
Çme
);

153 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

155 
sucûss_
 = 
çl£
;

158 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
	`¡ršg
(
pÜt
->
Çme
));

159 
cu¼’t_
->
	`addPÜt
(
p
);

160 
pÜt
 =…Üt->
Ãxt
;

162 
	}
}

164 
	gN‘li¡
::
	$addIÅuts
(
NameLi¡
 * cÚ¡ 
šs
) {

165 if(!
sucûss_
) ;

166 if(!
šs
) ;

168 
NameLi¡
 *
šput
 = 
šs
->
h—d
;

169 
šput
) {

170 if(
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
šput
->
Çme
))) {

171 
¡ršg
 
moduËÇme
;

172 
cu¼’t_
->
	`g‘Name
(
moduËÇme
);

173 
	`årštf
(
¡d”r
, "**ERROR Netlist::addInputs(): input ");

174 
	`årštf
(
¡d”r
, "`%s/%s' ", 
moduËÇme
.
	`c_¡r
(), 
šput
->
Çme
);

175 
	`årštf
(
¡d”r
, "net‡lreadyƒxists\n");

176 
sucûss_
 = 
çl£
;

179 
N‘
 *
n
 = 
Ãw
 
	`N‘
(
	`¡ršg
(
šput
->
Çme
));

180 
cu¼’t_
->
	`addN‘
(
n
);

181 
	`addC–l
(
NULL
, 
šput
->
Çme
, NULL, 
CELL_PI
);

183 
PÜt
 *
p
 = 
cu¼’t_
->
	`g‘PÜt
(
	`¡ršg
(
šput
->
Çme
));

184 if(!
p
) {

185 
	`årštf
(
¡d”r
, "**ERROR Netlist::addInputs(): ");

186 
	`årštf
(
¡d”r
, "pÜˆ`%s'‚Ùƒxi¡s\n", 
šput
->
Çme
);

187 
sucûss_
 = 
çl£
;

190 
p
->
	`£tTy³
(
PORT_INPUT
);

192 
šput
 = iÅut->
Ãxt
;

194 
	}
}

196 
	gN‘li¡
::
	$addOuuts
(
NameLi¡
 * cÚ¡ 
outs
) {

197 if(!
sucûss_
) ;

198 if(!
outs
) ;

200 
NameLi¡
 *
ouut
 = 
outs
->
h—d
;

201 
ouut
) {

202 if(
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
ouut
->
Çme
))) {

203 
¡ršg
 
moduËÇme
;

204 
cu¼’t_
->
	`g‘Name
(
moduËÇme
);

205 
	`årštf
(
¡d”r
, "**ERROR Netlist::addOutputs(): output ");

206 
	`årštf
(
¡d”r
, "`%s/%s' ", 
moduËÇme
.
	`c_¡r
(), 
ouut
->
Çme
);

207 
	`årštf
(
¡d”r
, "net‡lreadyƒxists\n");

208 
sucûss_
 = 
çl£
;

211 
N‘
 *
n
 = 
Ãw
 
	`N‘
(
	`¡ršg
(
ouut
->
Çme
));

212 
cu¼’t_
->
	`addN‘
(
n
);

213 
	`addC–l
(
NULL
, 
ouut
->
Çme
, NULL, 
CELL_PO
);

215 
PÜt
 *
p
 = 
cu¼’t_
->
	`g‘PÜt
(
	`¡ršg
(
ouut
->
Çme
));

216 if(!
p
) {

217 
	`årštf
(
¡d”r
, "**ERROR Netlist::addOutputs(): ");

218 
	`årštf
(
¡d”r
, "pÜˆ`%s'‚Ùƒxi¡s\n", 
ouut
->
Çme
);

219 
sucûss_
 = 
çl£
;

222 
p
->
	`£tTy³
(
PORT_OUTPUT
);

224 
ouut
 = ouut->
Ãxt
;

226 
	}
}

228 
	gN‘li¡
::
	$addN‘s
(
NameLi¡
 * cÚ¡ 
Ãts
) {

229 if(!
sucûss_
) ;

230 if(!
Ãts
) ;

232 
NameLi¡
 *
Ãt
 = 
Ãts
->
h—d
;

233 
Ãt
) {

234 if(
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Ãt
->
Çme
))) {

235 
	`årštf
(
¡d”r
, "**ERROR Netlist::addNet(): ");

236 
	`årštf
(
¡d”r
, "Ãˆ`%s'‡Ì—dyƒxi¡s\n", 
Ãt
->
Çme
);

237 
sucûss_
 = 
çl£
;

240 
N‘
 *
n
 = 
Ãw
 
	`N‘
(
	`¡ršg
(
Ãt
->
Çme
));

241 
cu¼’t_
->
	`addN‘
(
n
);

242 
Ãt
 =‚‘->
Ãxt
;

244 
	}
}

246 
	gN‘li¡
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³nm
,

247 cÚ¡ * cÚ¡ 
Çme
,

248 
NameLi¡
 * cÚ¡ 
Ãts
,

249 
C–lTy³
 
ty³
) {

251 if(
cu¼’t_
->
	`g‘C–l
(
	`¡ršg
(
Çme
))) {

252 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

253 
	`årštf
(
¡d”r
, "ûÎ `%s'‡Ì—dyƒxi¡s\n", 
Çme
);

254 
sucûss_
 = 
çl£
;

258 
N‘
 *
n
;

259 
C–l
 *
c
;

260 
ty³
) {

261 
CELL_PI
: {

262 
c
 = 
Ãw
 
	`C–l
(
	`¡ršg
(
Çme
), 
ty³
);

263 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Çme
));

264 
n
->
	`£tInC–l
(
c
);

265 
c
->
	`addOutN‘
(
n
); }

267 
CELL_PO
: {

268 
c
 = 
Ãw
 
	`C–l
(
	`¡ršg
(
Çme
), 
ty³
);

269 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Çme
));

270 
n
->
	`addOutC–l
(
c
);

271 
c
->
	`addInN‘
(
n
); }

273 
CELL_DFF
: {

274 if(!
Ãts
) {

275 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

276 
	`årštf
(
¡d”r
, "empty‚et†ist\n");

277 
sucûss_
 = 
çl£
;

280 
NameLi¡
 *
Ãt
 = 
Ãts
->
h—d
;

281 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Ãt
->
Çme
));

282 if(!
n
) {

283 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

284 
	`årštf
(
¡d”r
, "Ãˆ`%s'‚Ùƒxi¡s\n", 
Ãt
->
Çme
);

285 
sucûss_
 = 
çl£
;

288 
c
 = 
Ãw
 
	`C–l
(
	`¡ršg
(
Çme
), 
CELL_PPI
);

289 
n
->
	`£tInC–l
(
c
);

290 
c
->
	`addOutN‘
(
n
);

291 
cu¼’t_
->
	`addC–l
(
c
);

292 
Ãt
 =‚‘->
Ãxt
;

293 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Ãt
->
Çme
));

294 if(!
n
) {

295 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

296 
	`årštf
(
¡d”r
, "Ãˆ`%s'‚Ùƒxi¡s\n", 
Ãt
->
Çme
);

297 
sucûss_
 = 
çl£
;

300 
c
 = 
Ãw
 
	`C–l
(
	`¡ršg
(
Çme
)+¡ršg("_O"), 
CELL_PPO
);

301 
n
->
	`addOutC–l
(
c
);

302 
c
->
	`addInN‘
(
n
); }

305 if(!
Ãts
) {

306 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

307 
	`årštf
(
¡d”r
, "empty‚et†ist\n");

308 
sucûss_
 = 
çl£
;

311 
c
 = 
Ãw
 
	`C–l
(
	`¡ršg
(
Çme
), 
ty³
);

312 
NameLi¡
 *
Ãt
 = 
Ãts
->
h—d
;

313 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Ãt
->
Çme
));

314 if(!
n
) {

315 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

316 
	`årštf
(
¡d”r
, "Ãˆ`%s'‚Ùƒxi¡s\n", 
Ãt
->
Çme
);

317 
sucûss_
 = 
çl£
;

320 
n
->
	`£tInC–l
(
c
);

321 
c
->
	`addOutN‘
(
n
);

322 
Ãt
 =‚‘->
Ãxt
;

323 
Ãt
) {

324 
n
 = 
cu¼’t_
->
	`g‘N‘
(
	`¡ršg
(
Ãt
->
Çme
));

325 if(!
n
) {

326 
	`årštf
(
¡d”r
, "**ERROR Netlist::addCell(): ");

327 
	`årštf
(
¡d”r
, "Ãˆ`%s'‚Ùƒxi¡s\n", 
Ãt
->
Çme
);

328 
sucûss_
 = 
çl£
;

331 
n
->
	`addOutC–l
(
c
);

332 
c
->
	`addInN‘
(
n
);

333 
Ãt
 =‚‘->
Ãxt
;

337 
cu¼’t_
->
	`addC–l
(
c
);

338 
	}
}

340 
boŞ
 
myG©eComp
(
C–l
*, Cell*);

341 
	gN‘li¡
::
	$Ëv–ize
(
C–lVec
& 
ûÎs
) {

342 
queue
<
C–l
*> 
q_ûÎs
;

343 
size_t
 
i
=0; i<
tİ_
->
	`g‘C–lNum
(); i++) {

344 
C–l
 *
c
 = 
tİ_
->
	`g‘C–l
(
i
);

345 if(
c
->
	`g‘Ty³
()==
CELL_PI
 || c->g‘Ty³()==
CELL_PPI
) {

346 
c
->
	`£tLev–
(0);

347 
q_ûÎs
.
	`push
(
c
);

349 
ûÎs
.
	`push_back
(
c
);

352 
C–lVec
 
çnouts
;

353 !
q_ûÎs
.
	`em±y
()) {

354 
C–l
 *
c
 = 
q_ûÎs
.
	`äÚt
();

355 
q_ûÎs
.
	`pİ
();

357 
çnouts
.
	`ş—r
();

358 
size_t
 
i
=0; i<
c
->
	`g‘OutN‘Num
(); i++)

359 
c
->
	`g‘FªoutC–l
(
i
, 
çnouts
);

361 
size_t
 
i
=0; i<
çnouts
.
	`size
(); i++) {

362 
C–l
 *
fo
 = 
çnouts
[
i
];

364 
q_ûÎs
.
	`push
(
fo
);

365 if(
fo
->
	`g‘Lev–
()<
c
->g‘Lev–()+1èfo->
	`£tLev–
(c->getLevel()+1);

368 
¡d
::
	`sÜt
(
ûÎs
.
	`begš
(), c–ls.
	`’d
(), 
myG©eComp
);

369 
	}
}

371 
boŞ
 
	$myG©eComp
(
C–l
* 
c1
, C–l* 
c2
) {

372  (
c1
->
	`g‘Lev–
(è< 
c2
->getLevel());

373 
	}
}

	@interface/src/netlist.h

1 #iâdeà
_INTF_NETLIST_H_


2 
	#_INTF_NETLIST_H_


	)

4 
	~"moduË.h
"

6 
Çme¥aû
 
	gIÁfNs
 {

8 cÚ¡ 
	gNAME_LEN_MAX
 = 256;

11 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tModuË
 *> 
	tModuËM­
;

13 
	sNameLi¡
 {

14 
	gÇme
[
NAME_LEN_MAX
];

15 
NameLi¡
 *
	gÃxt
;

16 
NameLi¡
 *
	gh—d
;

19 şas 
	cN‘li¡
 {

20 
	gpublic
:

21 
N‘li¡
();

22 ~
N‘li¡
();

24 
boŞ
 
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ std::¡ršg& 
tİ
);

25 
boŞ
 
bud
(
CÜeNs
::
Cœcu™
* 
cœ
);

27 
ModuË
* 
g‘ModuË
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const;

28 
ModuË
* 
g‘Tİ
() const;

30 
ş—rModuË
();

32 
addModuË
(cÚ¡ * cÚ¡ 
Çme
);

33 
addPÜts
(
NameLi¡
 * cÚ¡ 
pÜts
);

34 
addIÅuts
(
NameLi¡
 * cÚ¡ 
šs
);

35 
addOuuts
(
NameLi¡
 * cÚ¡ 
outs
);

36 
addN‘s
(
NameLi¡
 * cÚ¡ 
Ãts
);

37 
addC–l
(cÚ¡ * cÚ¡ 
ty³nm
,

38 cÚ¡ * cÚ¡ 
Çme
,

39 
NameLi¡
 * cÚ¡ 
Ãts
,

40 
C–lTy³
 
ty³
 = 
CELL_MODINST
);

42 
C–lVec
 
	gûÎs
;

44 
	g´Ùeùed
:

45 
Ëv–ize
(
C–lVec
& 
ûÎs
);

47 
	g¡d
::
¡ršg
 
Çme_
;

49 
ModuË
 *
	gtİ_
;

50 
ModuË
 *
	gcu¼’t_
;

52 
boŞ
 
	gsucûss_
;

54 
ModuËM­
 
	gmoduË_m­_
;

57 
šlše
 
	gN‘li¡
::
	$N‘li¡
() {

58 
	}
}

60 
šlše
 
N‘li¡
::~
	$N‘li¡
() {

61 
	`ş—rModuË
();

62 
	}
}

64 
šlše
 
ModuË
 *
	gN‘li¡
::
g‘ModuË
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const {

65 
ModuËM­
::
cÚ¡_™”©Ü
 
™
 = 
moduË_m­_
.
fšd
(
Çme
);

66  (
	g™
 =ğ
moduË_m­_
.
’d
())?
NULL
:
™
->
£cÚd
;

69 
šlše
 
ModuË
 *
	gN‘li¡
::
	$g‘Tİ
() const {

70  
tİ_
;

71 
	}
}

73 
šlše
 
	gN‘li¡
::
	$ş—rModuË
() {

74 
ModuËM­
::
™”©Ü
 
™
 = 
moduË_m­_
.
	`begš
();

75 ; 
™
!=
moduË_m­_
.
	`’d
(); ++it)

76 
d–‘e
 
™
->
£cÚd
;

78 
tİ_
 = 
NULL
;

79 
	}
}

	@interface/src/netlist_test.cpp

1 
	~<c¡dio
>

2 
	~<c¡dlib
>

4 
	~"Ãi¡.h
"

6 
usšg
 
Çme¥aû
 
	g¡d
;

8 
usšg
 
Çme¥aû
 
	gIÁfNs
;

10 
	$maš
(
¬gc
, **
¬gv
) {

11 ià(
¬gc
 < 2) {

12 
	`årštf
(
¡d”r
, "**ERROR main():…lease…rovide input verilog\n");

13 
	`ex™
(-1);

16 
N‘li¡
 *
Æ_
 = 
Ãw
 
	`N‘li¡
();

17 ià(!
Æ_
->
	`·r£
(
	`¡ršg
(
¬gv
[1]), string())) {

18 
	`årštf
(
¡d”r
, "**ERROR main(): verilog…arser failed\n");

19 
	`ex™
(-1);

22 
cout
 << "‚etlist info. \n";

23 
cout
 << " #ports:\t\t";

24 
cout
 << 
Æ_
->
	`g‘Tİ
()->
	`g‘PÜtNum
(è<< 
’dl
;

25 
cout
 << " #cells:\t\t";

26 
cout
 << 
Æ_
->
	`g‘Tİ
()->
	`g‘C–lNum
(è<< 
’dl
;

27 
cout
 << " #nets:\t\t";

28 
cout
 << 
Æ_
->
	`g‘Tİ
()->
	`g‘N‘Num
(è<< 
’dl
;

32 
d–‘e
 
Æ_
;

34 
	}
}

	@
1
.
1
/usr/include
28
570
atpg/src/atpg_cmd.cpp
atpg/src/atpg_cmd.h
atpg/src/main.cpp
atpg/src/setup_cmd.cpp
atpg/src/setup_cmd.h
cmd/src/cmd.cpp
cmd/src/cmd.h
cmd/src/opt_mgr.cpp
cmd/src/opt_mgr.h
core/src/atpg.cpp
core/src/atpg.h
core/src/atpg_mgr.cpp
core/src/atpg_mgr.h
core/src/circuit.h
core/src/decision_tree.h
core/src/fault.cpp
core/src/fault.h
core/src/gate.cpp
core/src/gate.h
core/src/logic.h
core/src/logic_test.cpp
core/src/pattern.h
core/src/simulator.cpp
core/src/simulator.h
interface/src/module.h
interface/src/netlist.cpp
interface/src/netlist.h
interface/src/netlist_test.cpp
